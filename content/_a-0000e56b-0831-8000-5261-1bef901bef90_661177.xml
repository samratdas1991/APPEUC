<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e56b-0831-8000-5261-1bef901bef90_713482</versionUuid>
    <interface>
        <name>EAP_UploadHistoricalDataMasterFormV2</name>
        <uuid>_a-0000e56b-0831-8000-5261-1bef901bef90_661177</uuid>
        <description>Hold version 2 of historical data form</description>
        <parentUuid>_a-0000e4c3-7a1b-8000-524f-1bef901bef90_6580</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!processId,
  local!masterLookup: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_7827"(
    isActive:1,
    categoryGroup: #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3238117"[3],
    type: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_108743"[1],
    pagingInfo:#"SYSTEM_SYSRULES_pagingInfo"(
      startIndex:1,
      batchSize:-1,
      sort:#"SYSTEM_SYSRULES_sortInfo"(
        field:"sort_order",
        ascending:true()
      )
    )
  ),
  local!allprocess: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
    isActive: 1,
    processId:local!processId,
    pagingInfo:#"SYSTEM_SYSRULES_pagingInfo"(
      startIndex:1,
      batchSize:-1,
      sort:#"SYSTEM_SYSRULES_sortInfo"(
        field:"name", 
        ascending:true()
      )
    )
  ),
  local!eucnumber:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
    isActive: 1,

  ),
  local!runConfig:if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!processId),
  null,
  #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_11827"(
    pagingInfo:#"SYSTEM_SYSRULES_pagingInfo"(
      startIndex:1,
      batchSize:-1,
      sort: #"SYSTEM_SYSRULES_sortInfo"(
        field: "process_display_name",
        ascending:true()
      )
    ),
    processId:ri!processId,
    isActive:1
  )
  ),
  local!histEntityId:if(
    if(
      and(ri!isRelatedAction=true(),#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId)),
      or(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!processId)
      ),
      or(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!processId),
      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId)
      ),
    ),

    null,
    #"_a-0000e54c-ce50-8000-5260-1bef901bef90_612826"(
      processId: ri!processId,
      runConfigId:ri!runConfigId,
      isActive:1
    )
  ),

  {
    #"SYSTEM_SYSRULES_sectionLayout_v1"(
      contents: {

        #"_a-0000e518-940a-8000-525e-1bef901bef90_524783"(
          icon: "cloud-upload",
          label: "Upload Historical Data",
          color: "ACCENT"
        )
      },
      divider: "BELOW"
    ),
    #"SYSTEM_SYSRULES_columnsLayout"(
      showWhen: ri!isRelatedAction&lt;&gt;true(),
      columns: {
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_177515"(
            pickerLabel : "EUC Refernce Number",
            isShowWhen:ri!isactive=0,
            placeholder: "--Search EUC Reference Number--",
            maxSelections: 1,
            identifiers: union(touniformstring(index(local!eucnumber,"euc_reference_number",{})),
            touniformstring(index(local!eucnumber,"euc_reference_number",{}))
            ),
            choiceLabels:union(index(local!eucnumber,"euc_reference_number",{}),
            index(local!eucnumber,"euc_reference_number",{})), 
            selectedValue:touniformstring(ri!eucReferenceNumber),
            saveInto: {
              a!save(ri!eucReferenceNumber,save!value),
              a!save(local!processId,
              index(#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
                eucReferenceNumber:ri!eucReferenceNumber
              ),"process_id",{})),
              a!save(
                ri!processId,if(

                  or(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!eucReferenceNumber),tointeger(ri!eucReferenceNumber)=0),

                  null,
                  index(index(#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
                    eucReferenceNumber:ri!eucReferenceNumber
                  ),"process_id",{}),1,{})

                )
              ),
a!save(ri!frequency,null),
a!save(ri!runConfigId,null)

            }
          )
        ),
        #"SYSTEM_SYSRULES_columnLayout"()
      }
    ),
    #"SYSTEM_SYSRULES_columnsLayout"(
      columns: {
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: {
            if(
              or(ri!isactive=1,ri!isRelatedAction=true()),
              #"SYSTEM_SYSRULES_textField"(
                label: "Process Name",
                value:index(#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
                  processId:ri!processId
                ),"name",{}),
                readOnly: true()
              ),
              #"SYSTEM_SYSRULES_dropdownField"(
                label: "Process Name",
                required: true(),
                placeholderLabel:"Select process name",
                choiceValues:tointeger(index(local!allprocess,"process_id",{})),
                choiceLabels: #"SYSTEM_SYSRULES_forEach"(items:local!allprocess,
                expression: concat(
                  index(fv!item,"process_id",{})

                  ," - ",if(
                    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(fv!item,"name",{})),"N/A",index(fv!item,"name",{})
                  )
                )),
                value:if(
                  #"_a-0000e4c6-e892-8000-5254-1bef901bef90_47169"(
                    value:ri!processId,
                    choiceValue:tointeger(index(local!allprocess,"process_id",{}))
                  ),
                  ri!processId,
                  null
                ) ,
                saveInto: {
                  ri!processId,
                  a!save(ri!runConfigId,null),
                  a!save(ri!frequency,null),
                  a!save(ri!tempHistoricalDataFrequency,null),
                  a!save(ri!tempHistoricalData,null)
                },
                disabled: if(
                  ri!isactive=0,
                  false(),
                  true()
                )
              ))
          }
        ),
        #"SYSTEM_SYSRULES_columnLayout"(
          showWhen: if(
            and(ri!isRelatedAction=true(),#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId)),
            false(),
            true()
          ),
          contents: {
            if(
              or(ri!isactive=1,ri!isRelatedAction=true()),
              #"SYSTEM_SYSRULES_textField"(
                label: "Run Config Name",
                value:index(#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_11827"(
                  runConfigId:ri!runConfigId
                ),"process_display_name",{}),
                readOnly: true()
              ),
              #"SYSTEM_SYSRULES_dropdownField"(
                label: "Run Config Name",
                required: true(),
                placeholderLabel:"Select Run Config name",
                choiceValues:if(
                  #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"( tointeger(index(local!runConfig,"run_config_id",{}))),
                  null,
                  tointeger(index(local!runConfig,"run_config_id",{}))
                )
                ,
                choiceLabels:if(
                  #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"( 
                    local!runConfig),
                    null,#"SYSTEM_SYSRULES_forEach"(items:local!runConfig,
                    expression: concat(
                      index(fv!item,"run_config_id",{}) 
                      ," - ",if(
                        #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(fv!item,"process_display_name",{})),
                        "N/A",
                        index(fv!item,"process_display_name",{})
                      ) 
                    ))),
                    value: if(
                      #"_a-0000e4c6-e892-8000-5254-1bef901bef90_47169"(
                        value:ri!runConfigId,
                        choiceValue:tointeger(index(local!runConfig,"run_config_id",{}))
                      ),
                      ri!runConfigId,
                      null
                    ),

                    saveInto: {ri!runConfigId,

                    a!save(ri!frequency,
                    if(
                      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId),
                      null,
                      index(#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_15378"(
                        runConfigId:ri!runConfigId
                      ),"recurrence_type",{})
                    )
                    
                    ),
                    a!save(
                      ri!tempHistoricalData,null
                    ),
                    a!save(
                      ri!tempHistoricalDataFrequency,null
                    )


                    },
                    /*required: true()*/
              )
            )

          }
        ),
        #"SYSTEM_SYSRULES_columnLayout"(

          contents: {

            #"SYSTEM_SYSRULES_textField"(
              label: "Frequency",
              value:ri!frequency,
              readOnly: true()
            )


          }
        )
      }
    ),
    #"SYSTEM_SYSRULES_richTextDisplayField"(),

    if(
      ri!frequency="Weekly",
      #"SYSTEM_SYSRULES_richTextDisplayField"(
        value:#"SYSTEM_SYSRULES_richTextItem_v1"(
          text: "No Data Uploading Exist For Weekly Frequency",
          color:"NEGATIVE"
        )
      ),
      if(
        #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!histEntityId),
        {},
        if(
          or(
            and(tointeger(ri!isactive)=0,ri!isRelatedAction&lt;&gt;true()),
            and(
              ri!isRelatedAction=true(),
              #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId),
              ri!isactive=0
            )
          ),
          if(
            #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
              tointeger(
                wherecontains(
                  tostring(
                    ri!frequency
                  ),
                  touniformstring(
                    #"_a-0000e56b-0831-8000-5261-1bef901bef90_661220"
                  )
                )
              )
            ),
            null,
            choose(
              tointeger(
                wherecontains(
                  tostring(
                    ri!frequency
                  ),
                  touniformstring(
                    #"_a-0000e56b-0831-8000-5261-1bef901bef90_661220"
                  )
                )
              ),
              #"_a-0000e56b-0831-8000-5261-1bef901bef90_667210"(
                frequency: ri!frequency,
                tempHistoricalDataFrequency:ri!tempHistoricalDataFrequency,
                processId:ri!processId,
                runConfigId:ri!runConfigId,
              ),
              #"_a-0000e56b-0831-8000-5261-1bef901bef90_662497"(
                tempHistoricalDataFrequency:ri!tempHistoricalDataFrequency,
                masterLookUpData: local!masterLookup,
                frequency: ri!frequency,
                processId:ri!processId,
                runConfigId:ri!runConfigId
              ),
              #"_a-0000e56b-0831-8000-5261-1bef901bef90_662223"(
                processId: ri!processId,
                frequency: ri!frequency,
                tempHistoricalDataFrequency:ri!tempHistoricalDataFrequency,
                runConfigId:ri!runConfigId
              ),

            )
          ),
          {}
        )
      )
    )
    ,



    if(
      tointeger(
        ri!isactive
      ) = 0,
      {},
      #"_a-0000e56b-0831-8000-5261-1bef901bef90_674474"(
        tempHistoricData: ri!tempHistoricalData,
        frequency: ri!frequency,
        processId: ri!processId
      )
    ),
    #"SYSTEM_SYSRULES_textField"(
      readOnly: true(),
      value:  " ",
      validations: if(
        #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!histEntityId),
        "No Entity Found For Selected Run Config And Process",
        {}
      ),
      showWhen:  and(
        and(not(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!processId),

        ),ri!processId&lt;&gt;0),
        and(
          not(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId)),ri!runConfigId&lt;&gt;0)

      )
    ),
    #"SYSTEM_SYSRULES_textField"(
      value:" ",
      readOnly: true(),
      validations:if(
        ri!isactive=0,
        {},
        if(
          contains(
            toboolean(#"SYSTEM_SYSRULES_forEach"(
              items: union(index(ri!tempHistoricalData,"frequencyId",{}),
              index(ri!tempHistoricalData,"frequencyId",{})
              ),
              expression: not(
                contains(
                  toboolean(
                    index(
                      index(
                        ri!tempHistoricalData,

                        wherecontains(tointeger(fv!item),
                        tointeger(index(ri!tempHistoricalData,"frequencyId",{}))),
                        {}),"isapplicable",{}
                    )
                  ),
                  true()
                ))
            )),true()),
            "Data Should Exist For All The Combination With Minimum One Applicable",
            {}
        )
      )

    ),


    #"SYSTEM_SYSRULES_ButtonLayout"(
      primaryButtons: {
        #"SYSTEM_SYSRULES_ButtonWidget"(
          label: "Proceed To Upload Document",
          style: "PRIMARY",
          saveInto: {
            a!save(ri!buttonAction,#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[11]),
            a!save(
              ri!isactive,
              1
            ),
            if(
              tostring(ri!frequency)=#"_a-0000e56b-0831-8000-5261-1bef901bef90_661220"[1],
              a!save(
                ri!tempHistoricalData,#"SYSTEM_SYSRULES_forEach"(
                  items: a!flatten(
                    #"SYSTEM_SYSRULES_forEach"(
                      items:ri!tempHistoricalDataFrequency,
                      expression: {
                        a!localVariables(
                          local!daily1:fv!item,
                          local!checkTransStatus: if(
                            #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                              local!daily1.requenstId
                            ),
                            {},
                            #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617732"(
                              requestId:local!daily1.requenstId,
                              histEntityMappingId:index(local!histEntityId,"hist_entity_mapping_id",null),
                              histParsingStatus: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_86234"[1]
                            )
                          ),
                          local!histTrans:if(
                            #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                              local!daily1.requenstId
                            ),
                            {},
                            #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617732"(
                              requestId:local!daily1.requenstId
                            )
                          ),
                          #"SYSTEM_SYSRULES_forEach"(
                            items:index(local!histEntityId,"hist_entity_mapping_id",null),
                            expression: {
                              id:index(local!daily1,"id",{}),
                              entity:fv!item,
                              daily:index(local!daily1,"daily",{}),
                              requestId:index(local!daily1,"requenstId",{}),
                              action:if(
                                #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(local!daily1,"requenstId",{})),
                                "insert",
                                if(
                                  contains(
                                    tointeger(index(local!histTrans,"hist_entity_mapping_id",{})),
                                    tointeger(fv!item)
                                  ),
                                  "rerun",
                                  "insert"

                                )

                              ),
                              runConfigId:index(local!daily1,"runConfigId",{}),
                              applicable:if(
                                #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(local!daily1,"requenstId",{})),
                                true(),
                                if(
                                  #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!checkTransStatus),
                                  true(),
                                  if(
                                    contains(
                                      tointeger(
                                        index(
                                          local!checkTransStatus,
                                          "hist_entity_mapping_id",
                                          {}
                                        )
                                      ),
                                      tointeger(
                                        fv!item
                                      )
                                    ),
                                    false(),
                                    true()
                                  )
                                ))
                            }
                          )
                        )
                      }
                    )),
                    expression: 'type!{urn:com:appian:types:eap}EAP_Temp_HistoricalDataUpload'(
                      histEntityMappingId:fv!item.entity,
                      frequencyId:fv!item.id,
                      processId:ri!processId,
                      daily:index(fv!item,"daily",{}),
                      RequestId:index(fv!item,"requestId",{}),
                      frequency:ri!frequency,
                      isapplicable:index(fv!item,"applicable",{}),
                      action:fv!item.action,
                      runConfigId:index(fv!item,"runConfigId",{})

                    )
                )

              ),
              if(
                tostring(ri!frequency)=#"_a-0000e56b-0831-8000-5261-1bef901bef90_661220"[3],
                a!save(
                  ri!tempHistoricalData,#"SYSTEM_SYSRULES_forEach"(
                    items: a!flatten(
                      #"SYSTEM_SYSRULES_forEach"(
                        items: ri!tempHistoricalDataFrequency,
                        expression: {
                          a!localVariables(
                            local!yearly1:fv!item,
                            local!checkTransStatus: if(
                              #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                local!yearly1.requenstId
                              ),
                              {},
                              #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617732"(
                                requestId:local!yearly1.requenstId,
                                histParsingStatus: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_86234"[1]
                              )
                            ),
                            local!histTrans:if(
                              #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                local!yearly1.requenstId
                              ),
                              {},
                              #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617732"(
                                requestId:local!yearly1.requenstId
                              )
                            ),
                            #"SYSTEM_SYSRULES_forEach"(
                              items:index(local!histEntityId,"hist_entity_mapping_id",null),
                              expression: {
                                id:index(local!yearly1,"id",{}),
                                entity:fv!item,
                                year:index(local!yearly1,"year",{}),
                                requestId:index(local!yearly1,"requenstId",{}),
                                action:if(
                                  #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(local!yearly1,"requenstId",{})),
                                  "insert",  if(
                                    contains(
                                      tointeger(index(local!histTrans,"hist_entity_mapping_id",{})),
                                      fv!item
                                    ),
                                    "rerun",
                                    "insert"

                                  )
                                ),
                                runConfigId:index(local!yearly1,"runConfigId",{}),
                                applicable:if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(local!yearly1,"requenstId",{})),
                                true(),
                                if(
                                  #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!checkTransStatus),
                                  true(),
                                  if(
                                    contains(
                                      tointeger(
                                        index(
                                          local!checkTransStatus,
                                          "hist_entity_mapping_id",
                                          {}
                                        )
                                      ),
                                      tointeger(
                                        fv!item
                                      )
                                    ),
                                    false(),
                                    true()
                                  ))
                                )
                              }
                            )
                          )
                        }
                      )),
                      expression: 'type!{urn:com:appian:types:eap}EAP_Temp_HistoricalDataUpload'(
                        histEntityMappingId:fv!item.entity,
                        year:fv!item.year,
                        frequencyId:index(fv!item,"id",{}),
                        frequency:ri!frequency,
                        RequestId:index(fv!item,"requestId",{}),
                        processId:ri!processId,
                        isapplicable:index(fv!item,"applicable",{}),
                        action:fv!item.action,
                        runConfigId:index(fv!item,"runConfigId",{})
                      )
                  )

                ),
                a!save(
                  ri!tempHistoricalData,#"SYSTEM_SYSRULES_forEach"(
                    items: a!flatten(
                      #"SYSTEM_SYSRULES_forEach"(
                        items:ri!tempHistoricalDataFrequency,
                        expression: {
                          a!localVariables(
                            local!yearly1:fv!item,
                            local!checkTransStatus: if(
                              #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                local!yearly1.requenstId
                              ),
                              {},
                              #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617732"(
                                requestId:local!yearly1.requenstId,
                                histParsingStatus: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_86234"[1]
                              )
                            ),
                            local!histTrans:if(
                              #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                local!yearly1.requenstId
                              ),
                              {},
                              #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617732"(
                                requestId:local!yearly1.requenstId
                              )),
                              #"SYSTEM_SYSRULES_forEach"(
                                items:index(local!histEntityId,"hist_entity_mapping_id",null),
                                expression: {
                                  id:local!yearly1.id,
                                  entity:fv!item,
                                  year:index(local!yearly1,"year",{}),
                                  month:index(local!yearly1,"month",{}),
                                  requestId:index(local!yearly1,"requenstId",{}),
                                  action:if(
                                    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(local!yearly1,"requenstId",{})),
                                    "insert",if(
                                      contains(
                                        tointeger(index(local!histTrans,"hist_entity_mapping_id",{})),
                                        fv!item
                                      ),
                                      "rerun",
                                      "insert"

                                    )
                                  ),
                                  runConfigId:index(local!yearly1,"runConfigId",{}),
                                  applicable:if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(local!yearly1,"requenstId",{})),
                                  true(),
                                  if(
                                    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!checkTransStatus),
                                    true(),
                                    if(
                                      contains(
                                        tointeger(
                                          index(
                                            local!checkTransStatus,
                                            "hist_entity_mapping_id",
                                            {}
                                          )
                                        ),
                                        tointeger(
                                          fv!item
                                        )
                                      ),
                                      false(),
                                      true()
                                    ))
                                  )
                                }
                              )
                          )
                        }
                      )),
                      expression: 'type!{urn:com:appian:types:eap}EAP_Temp_HistoricalDataUpload'(
                        histEntityMappingId:fv!item.entity,
                        year:fv!item.year,
                        frequencyId:index(fv!item,"id",{}),
                        frequency:ri!frequency,
                        action:fv!item.action,
                        month:fv!item.month,
                        RequestId:index(fv!item,"requestId",{}),
                        isapplicable:index(fv!item,"applicable",{}),
                        processId:ri!processId,
                        runConfigId: index(fv!item,"runConfigId",{})
                      )
                  )

                ),

              )

            )


          },
          submit:true(),
          validate: true(),
          showWhen:or(and(tointeger(ri!isactive)=0,
          if(
            tostring(ri!frequency)=#"_a-0000e56b-0831-8000-5261-1bef901bef90_661220"[1],
            not(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(ri!tempHistoricalDataFrequency,"daily",{}))),
            if(
              tostring(ri!frequency)=#"_a-0000e56b-0831-8000-5261-1bef901bef90_661220"[2],
              not(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(ri!tempHistoricalDataFrequency,"month",{}))),
              not(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(ri!tempHistoricalDataFrequency,"year",{})))
            )


          ),
          ri!isRelatedAction&lt;&gt;true()
          ),
          and(ri!isRelatedAction=true(),
          #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId),tointeger(ri!isactive)=0)
          )
        ),
        #"SYSTEM_SYSRULES_ButtonWidget"(
          showWhen: ri!isactive=1,
          label:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[1],
          value:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[1],
          saveInto: {ri!buttonAction,

          a!save(ri!tempHistoricalData,
          index(ri!tempHistoricalData,
          wherecontains(true(),toboolean(index(ri!tempHistoricalData,"isapplicable",{}))),
          {}))
          },
          style: "PRIMARY",
          submit: true(),
          validate: true()
        )
      },
      secondaryButtons:{
        #"SYSTEM_SYSRULES_ButtonWidget"(
          label:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[6],
          value:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[2],
          saveInto: {
            ri!buttonAction,

          },
          validate:false(),
          submit: true(),
          style: "NORMAL",
          showWhen:or(
            and(ri!isactive=1,
            ri!isRelatedAction=true(),
            not(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId))
            ),
            ri!isactive=0,
            and(ri!isRelatedAction=true(),#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId),ri!isactive=0)
          )
        ),

        #"SYSTEM_SYSRULES_ButtonWidget"(
          label: "Back",
          saveInto: {

            a!save(ri!isactive,0)
          },
          showWhen: or(and(tointeger(ri!isactive)=1,ri!isRelatedAction&lt;&gt;true()),
          and(ri!isRelatedAction=true(),
          #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!runConfigId),tointeger(ri!isactive)=1)
          )
        )
      }
    )
    ,

  },

)</definition>
        <namedTypedValue>
            <name>processId</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>buttonAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>tempHistoricalData</name>
            <type>
                <name>EAP_Temp_HistoricalDataUpload?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isactive</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>frequency</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>tempHistoricalDataFrequency</name>
            <type>
                <name>EAP_temp_HistoricalDataFrequency?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>eucReferenceNumber</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>runConfigId</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isRelatedAction</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>processId</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>buttonAction</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>tempHistoricalData</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">0</a:value>
                    <a:nameRef>isactive</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>frequency</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>tempHistoricalDataFrequency</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>eucReferenceNumber</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>runConfigId</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>isRelatedAction</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_704849"/>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_709269"/>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_713482"/>
    </history>
</contentHaul>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e505-ae05-8000-525c-1bef901bef90_414257</versionUuid>
    <interface>
        <name>EAP_AddNewCalendarDetails</name>
        <uuid>_a-0000e4cd-1af4-8000-5255-1bef901bef90_93695</uuid>
        <description>interface for adding new calendar details</description>
        <parentUuid>_a-0000e4c3-7a1b-8000-524f-1bef901bef90_6580</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>load(
  local!masterLookup: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_7827"(
    type: {
      #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_108148"[17],
      #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_108148"[24] 
    },
    pagingInfo: #"SYSTEM_SYSRULES_pagingInfo"(
      startIndex: 1,
      batchSize: -1,
      sort: #"SYSTEM_SYSRULES_sortInfo"(
        field: "label",
        ascending:true()

      )
    )    
    
  ),
  local!selectedCalendar,
  local!process,
  local!addcal:false(),
  local!region: index(
    local!masterLookup,
    wherecontains(
      #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_108148"[17],
      touniformstring(
        index(
          local!masterLookup,
          "type",
          {}
        )
      )
    ),
    {}
  ),
  local!timeZone: index(
    local!masterLookup,
    wherecontains(
      #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_108148"[24],
      touniformstring(
        index(
          local!masterLookup,
          "type",
          {}
        )
      )
    ),
    {}
  ),
  local!hour:    if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      index(ri!refCalendarCountryDetails,"start_working_time",{})
    ),
    null,
    tointeger(index(split(  index(ri!refCalendarCountryDetails,"start_working_time","") ,":"),1,{}))
  ), 
  local!minute :if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      index(ri!refCalendarCountryDetails,"start_working_time",{})
    ),
    null,
    tostring(
      index(
        split(index(split(index(ri!refCalendarCountryDetails,"start_working_time",""),":"),2,{}) ," "),1,""
      )
    )
  ),  
  local!meridiem : if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      index(ri!refCalendarCountryDetails,"start_working_time",{})
    ),
    "",    
      index(
        split(index(split(index(ri!refCalendarCountryDetails,"start_working_time",""),":"),2,{}) ," "),2,""
      )
    
  ),
  local!hour1:if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      index(ri!refCalendarCountryDetails,"end_working_time",{})
    ),
    null,
    tointeger(index(split(  index(ri!refCalendarCountryDetails,"end_working_time","") ,":"),1,{}))
  ), 
  local!minute1:if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      index(ri!refCalendarCountryDetails,"end_working_time",{})
    ),
    null,
    tostring(
      index(
        split(index(split(index(ri!refCalendarCountryDetails,"end_working_time",""),":"),2,{}) ," "),1,""
      )
    )
  ), 
  local!meridiem1:if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      index(ri!refCalendarCountryDetails,"end_working_time",{})
    ),
    "",    
    index(
      split(index(split(index(ri!refCalendarCountryDetails,"end_working_time",""),":"),2,{}) ," "),2,""
    )

  ),
  local!calendarName:index(
    #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_125209"(
    pagingInfo: #"SYSTEM_SYSRULES_pagingInfo"(
      startIndex:1, 
      batchSize:-1, 
      sort:#"SYSTEM_SYSRULES_sortInfo"(
        field:"calendar_name",
        ascending: true()
      )
    )
  ),
  "calendar_name",
  {}
  )
  ,
   with(
     local!countryName: if(
       #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
         index(ri!refCalendarCountryDetails,"region_name",{})
       ),
       {},
       #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_7827"(
         type: upper(
           joinarray(
             split(
             index(ri!refCalendarCountryDetails,"region_name",{}),
             " "),
             "_")
         ),
         pagingInfo: #"SYSTEM_SYSRULES_pagingInfo"(
           startIndex: 1,
           batchSize: -1,
           sort: #"SYSTEM_SYSRULES_sortInfo"(
             field: "sort_order",
             ascending:true()

           )
         )  
       )

     ),
       
      
       {
         #"SYSTEM_SYSRULES_sectionLayout_v1"(
           label: if(ri!labelAdd=1, "Add New Details", "Edit Details"),
           contents: {
             #"SYSTEM_SYSRULES_richTextDisplayField"(),
             #"SYSTEM_SYSRULES_columnsLayout"(
               columns: {
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents:{
                     #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_285963"(
                       label:"Calendar Name",
                       placeHolder: "Enter Calendar Name",
                       value:index(ri!refCalendarCountryDetails,"calendar_name",null),
                       saveInto: ri!refCalendarCountryDetails.calendar_name,
                       required:true(),
                       validations:{
                        if(
                          #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                            index(ri!refCalendarCountryDetails,"calendar_id",{})
                          ),
                          if(
                            contains(
                              touniformstring( local!calendarName),
                              touniformstring(index(ri!refCalendarCountryDetails,"calendar_name",null))
                            ),
                            "Calendar Name already exist",
                            {}
                          ),
                          {}
                        )
                       }
                       
                     )
                   }
                 ),
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents:#"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                     label:"Region Name",  
                     helpTooltip: "Value from master lookup",
                     placeholderLabel:  "--Select Region Name--",
                     choiceLabels: index(
                       local!region,
                       "label",
                       {}
                     ),
                     choiceValues:index(
                       local!region,
                       "label",
                       {}
                     ), 
                     value: index(ri!refCalendarCountryDetails,"region_name",null),
                     saveInto:{
                       ri!refCalendarCountryDetails.region_name,
                       a!save(
                         ri!refCalendarCountryDetails.country_name,
                         null
                       )
                     },          
                     required:true(),
                     disabled: if(
                       #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                         index(
                           ri!refCalendarCountryDetails,"country_id",{}
                         )
                       ),
                       false(),
                       true()
                     )
                   )
                 ),
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents:
                  /* a!dropdownField(
                     label:"Country Name",
                     placeholder:  "--Enter Country Name--",
                     choiceLabels: cons!EAP_COUNTRY_NAME,
                     choiceValues:cons!EAP_COUNTRY_NAME,
                     value:index(ri!refCountry,"country_name",null),
                     saveInto: ri!refCountry.country_name,          
                     required:true()
                   )
                   */
                   #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                     label:"Country Name",
                     helpTooltip: "Value with respect to region from master lookup",
                     placeholderLabel:  "--Select Country--",
                     choiceLabels: index(local!countryName,"label",{}),
                     choiceValues: index(local!countryName,"label",{}),
                     value:index(ri!refCalendarCountryDetails,"country_name",null),
                     saveInto: ri!refCalendarCountryDetails.country_name,          
                     required:true(),
                     disabled: if(
                       #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                         index(
                           ri!refCalendarCountryDetails,"country_id",{}
                         )
                       ),
                       if(
                         #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(index(ri!refCalendarCountryDetails,"region_name",null)),
                         true(),
                         false()
                       ),
                       true()
                     )
                   )
                 )
                 
               }
             ),
             #"SYSTEM_SYSRULES_richTextDisplayField"(),
             #"SYSTEM_SYSRULES_columnsLayout"(
               columns:{
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents:
                   /*a!dropdownField(*/
                     /*label:"Time Zone",*/
                     /*placeholderLabel:  "--Select Time Zone--",*/
                     /*choiceLabels: index(local!timeZone,"label",{}),*/
                     /*choiceValues: index(local!timeZone,"code",{}),*/
                     /*value:index(ri!refCalendarCountryDetails,"timezone_id",null),*/
                     /*saveInto: ri!refCalendarCountryDetails.timezone_id,          */
                     /*required:true()*/
                   /*),*/
                   #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_177515"(
                     pickerLabel : "Time Zone",
                     helpTooltip: "Value from master lookup",
                     isRequired: true(),
                     placeholder: "--Select Time Zone--",
                     maxSelections: 1,
                     identifiers: touniformstring(index(local!timeZone,"code",{})),
                     choiceLabels: index(local!timeZone,"label",{}), 
                     selectedValue: touniformstring(index(ri!refCalendarCountryDetails,"timezone_id",null)),
                     saveInto:  ri!refCalendarCountryDetails.timezone_id
                   )
                 ),
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents:
                   {
                     #"SYSTEM_SYSRULES_richTextDisplayField"(
                       label: "Start Working Time",
                       labelPosition: "JUSTIFIED"
                     ),
                     #"SYSTEM_SYSRULES_sideBySideLayout"(
                       items:{
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                             labelPosition: "COLLAPSED",
                             instructions: "Hour",
                             placeholderLabel: "Select hour",
                             choiceLabels: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71424",
                             choiceValues: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71424",
                             value:  if(
                               #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!hour),
                               if(
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                   index(ri!refCalendarCountryDetails,"start_working_time",{})
                                 ),
                                 null,
                                 tointeger(index(split(  index(ri!refCalendarCountryDetails,"start_working_time","") ,":"),1,{}))
                               ) ,
                               local!hour
                             ),
                             saveInto: 
                               local!hour
                             ,
                             required: true()
                           ),
                           width: "AUTO"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"SYSTEM_SYSRULES_richTextDisplayField"(
                             labelPosition: "",
                             value:#"SYSTEM_SYSRULES_richTextItem_v1"(
                               text: ":"
                             )
                           ),
                           width: "MINIMIZE"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                             labelPosition: "COLLAPSED",
                             instructions: "Minute",
                             placeholderLabel: "Select minute",
                             choiceLabels: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71671",
                             choiceValues: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71671",
                             value:
                              
                             if(
                               #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                 local!minute
                               ),
                               if(
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                   index(ri!refCalendarCountryDetails,"start_working_time",{})
                                 ),
                                 null,
                                 tostring(
                                   index(
                                     split(index(split(index(ri!refCalendarCountryDetails,"start_working_time",""),":"),2,{}) ," "),1,""
                                   )
                                 )
                               ),
                               
                               if( contains(#"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71671", local!minute), local!minute, null)
                             )
                             
                             /*if(not(contains(cons!EAP_MINUTES, local!minute)),null,local!minute)*/
                             ,
                            
                             saveInto: local!minute,
                             required: true()
                           ),
                           width: "AUTO"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                             labelPosition: "COLLAPSED",
                             instructions: "Meridiem",
                             placeholderLabel: "Select meridiem",
                             choiceLabels: {
                               "AM",
                               "PM"
                             },
                             choiceValues:  {
                               "AM",
                               "PM"
                             },
                             value: if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!meridiem),
                             if(
                               #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                 index(ri!refCalendarCountryDetails,"start_working_time",{})
                               ),
                               "",    
                               index(
                                 split(index(split(index(ri!refCalendarCountryDetails,"start_working_time",""),":"),2,{}) ," "),2,""
                               )

                             ),
                             local!meridiem),
                             saveInto: local!meridiem,
                             required: true()
                           ),
                           width: "1X"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           width: "2X"
                         )
                       }
                     )
                   }
                 ),        
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents:
                   {
                     #"SYSTEM_SYSRULES_richTextDisplayField"(
                       label: "End Working Time",
                       labelPosition: "JUSTIFIED"
                     ),
                     #"SYSTEM_SYSRULES_sideBySideLayout"(
                       items:{
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                             labelPosition: "COLLAPSED",
                             instructions: "Hour",
                             placeholderLabel: "Select hour",
                             choiceLabels: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71424",
                             choiceValues: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71424",
                             value: if(
                               #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                 local!hour1
                               ),
                               if(
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                   index(ri!refCalendarCountryDetails,"end_working_time",{})
                                 ),
                                 null,
                                 tointeger(index(split(  index(ri!refCalendarCountryDetails,"end_working_time","") ,":"),1,{}))
                               ),
                               local!hour1
                             ),
                             saveInto: local!hour1,
                             required: true()
                           ),
                           width: "AUTO"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"SYSTEM_SYSRULES_richTextDisplayField"(
                             labelPosition: "",
                             value:#"SYSTEM_SYSRULES_richTextItem_v1"(
                               text: ":"
                             )
                           ),
                           width: "MINIMIZE"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                             labelPosition: "COLLAPSED",
                             instructions: "Minute",
                             placeholderLabel: "Select minute",
                             choiceLabels: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71671",
                             choiceValues: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71671",
                             value:  if(
                               #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                 local!minute1
                               ),
                               if(
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                   index(ri!refCalendarCountryDetails,"end_working_time",{})
                                 ),
                                 null,
                                 tostring(
                                   index(
                                     split(index(split(index(ri!refCalendarCountryDetails,"end_working_time",""),":"),2,{}) ," "),1,""
                                   )
                                 )
                               ),
                               if( contains(#"_a-0000e4cd-1af4-8000-5255-1bef901bef90_71671", local!minute1), local!minute1, null)
                             ),
                             
                             /*if(not(contains(cons!EAP_MINUTES, local!minute1)),null,local!minute1),*/
                             saveInto: local!minute1,
                             required: true()
                           ),
                           width: "AUTO"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                             labelPosition: "COLLAPSED",
                             instructions: "Meridiem",
                             placeholderLabel: "Select meridiem",
                             choiceLabels: {
                               "AM",
                               "PM"
                             },
                             choiceValues:  {
                               "AM",
                               "PM"
                             },
                             value: if(
                               #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                 local!meridiem1
                               ),
                               if(
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                   index(ri!refCalendarCountryDetails,"start_working_time",{})
                                 ),
                                 "",    
                                 index(
                                   split(index(split(index(ri!refCalendarCountryDetails,"start_working_time",""),":"),2,{}) ," "),2,""
                                 )

                               ),
                               local!meridiem1
                             ),
                             saveInto: local!meridiem1,
                             required: true()
                           ),
                           width: "1X"
                         ),
                         #"SYSTEM_SYSRULES_sideBySideItem"(
                           item: #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_285963"(
                           
                             labelPosition: "COLLAPSED",
                             value: " ",
                             readOnly: true(),
                             validations: if(
                               or(
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!hour),
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!hour1),
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!minute),
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!minute1),
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!meridiem),
                                 #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!meridiem1)
                               ),
                               {},
                               if(
                                 tointeger(
                                   concat(
                                     if(
                                       local!meridiem="AM",
                                       local!hour,
                                       tointeger(local!hour)+12
                                     ),
                                     local!minute
                                   )
                                 )&lt;tointeger(
                                   concat(
                                     if(
                                       local!meridiem1="AM",
                                       local!hour1,
                                       tointeger(local!hour1)+12
                                     ),
                                     local!minute1
                                   )
                                 ),
                                 {},
                                 "Time should be greater than start working time"
                               )
                             )
                           ),
                           width: "2X"
                         )
                       }
                     )
                   }
                 )

               }
             ),

             #"SYSTEM_SYSRULES_columnsLayout"(
               columns:{
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents:{
                     #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_285963"(
                       label:"Locale",
                       /*required:true(),*/
                       placeHolder: "Enter Locale",
                       value:index(ri!refCalendarCountryDetails,"locale",null),
                       saveInto: ri!refCalendarCountryDetails.locale

                     )
                   }
                 ),
                
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents: if(
                     ri!isReadOnly = true(),
                     #"SYSTEM_SYSRULES_richTextDisplayField"(
                       label: "Status",
                       value: if(
                         ri!refCalendarCountryDetails.is_active = 1,
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           icon: "check",
                           color: "POSITIVE",
                           size: "MEDIUM"
                         ),
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           icon: "times-circle",
                           color: "NEGATIVE",
                           size: "MEDIUM"
                         )
                       )
                     ),
                     #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_288522"(
                       label: "Status",
                       choiceLabels: {
                         "Active",
                         "In-active"
                       },
                       choiceValues: {
                         1,
                         0
                       },
                       validations  :{
                       if(
                         or(toboolean(ri!isInactive)=true(),tointeger(index(local!selectedCalendar,"is_active",{}))=0),
                        {},
                         if(
                           and( index(
                             ri!refCalendarCountryDetails,
                             "is_active",
                             {}
                           )=0, contains(
                            tointeger(index(local!process,"is_active",{})),
                            1
                          )),
                          
                           "Calendar can not be inactivated as there are some processes and scheduler run configurations related to it.",
                           ""
                         )
                       
                       ),
                       if(
                         or(toboolean(ri!isActive)=true(),tointeger(index(local!selectedCalendar,"is_active",{}))=1),
                         {},
                         if(
                           and( index(
                             ri!refCalendarCountryDetails,
                             "is_active",
                             {}
                           )=1, contains(
                             tointeger(index(local!process,"is_active",{})),
                             0
                           )),

                           "Calendar can not be activated as there are some processes and run configurations related to it.",
                           ""
                         )

                       )
                       },
                      
                       value: index(
                         ri!refCalendarCountryDetails,
                         "is_active",
                         {}
                       ),
                       saveInto: {
                         ri!refCalendarCountryDetails.is_active,
                         a!save(
                           local!process,
                           if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!CalendarId),null,
                           #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
                             calendarId:ri!CalendarId
                           )),
                         ),
                         a!save(local!selectedCalendar,
                         if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!CalendarId),null,
                         #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_125209"(
                           calendarId: ri!CalendarId
                         )
                         )),
                         a!save(
                           ri!refCalendarCountryDetails.modified_by,
                           loggedInUser()
                         ),
                         a!save(
                           ri!refCalendarCountryDetails.modified_on,
                           now()
                         )
                       },
                       required: true(),
                       choiceLayout: "COMPACT"
                     )
                   )
                 ),
                 #"SYSTEM_SYSRULES_columnLayout"()
               
                 
               }
             ),
             #"SYSTEM_SYSRULES_sideBySideLayout"(
               items: {
                 #"SYSTEM_SYSRULES_sideBySideItem"(
                   item: #"SYSTEM_SYSRULES_checkboxField"(
                     choiceLabels:"Inactive all Processes and scheduler run configurations",
                     choiceValues: true(),
                     value:ri!isInactive,
                     saveInto: ri!isInactive,
                     showWhen:  and(
                       contains(
                         tointeger(index(local!process,"is_active",{})),
                         1
                       )
                       ,
    contains(
                       tointeger(index(local!selectedCalendar,"is_active",{})),
                       1
                     ))
                   ),
                   showWhen:tointeger( index(
                     ri!refCalendarCountryDetails,
                     "is_active",
                     {}
                   ))=0,
                   width: "MINIMIZE"
                 ),
                 #"SYSTEM_SYSRULES_sideBySideItem"(
                   item: #"SYSTEM_SYSRULES_checkboxField"(
                     choiceLabels:"active all Processes and run configurations",
                     choiceValues: true(),
                     value:ri!isActive,
                     saveInto: ri!isActive,
                     showWhen:  and(
                       contains(
                         tointeger(index(local!process,"is_active",{})),
                         0
                       )
                       ,
      
                       contains(
                         tointeger(index(local!selectedCalendar,"is_active",{})),
                         0
                       )
                     )
                   ),
                   showWhen: tointeger( index(
                     ri!refCalendarCountryDetails,
                     "is_active",
                     {}
                   ))=1,
                   width: "MINIMIZE"
                 )
               }
             ),
             if(
               or(tointeger(index(local!selectedCalendar,"is_active",{}))=0),
               {},
             if( 
               and(index(
               ri!refCalendarCountryDetails,
               "is_active",
               {}
             )=0,
             
               contains(
                 tointeger(index(local!process,"is_active",{})),
                 1
               )),
             if(
               #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                 local!process
               ),
               #"SYSTEM_SYSRULES_richTextDisplayField"(
                 align: "CENTER",
                 value: #"SYSTEM_SYSRULES_richTextItem_v1"(
                   text: "No Related Process",
                   color: "SECONDARY",
                   size: "MEDIUM_PLUS",
                   style: "EMPHASIS"
                 ),

               ), 
               {
                 #"SYSTEM_SYSRULES_sideBySideLayout"(
                   items: {
                     #"SYSTEM_SYSRULES_sideBySideItem"(
                       item: #"SYSTEM_SYSRULES_richTextDisplayField"(
                         value: #"SYSTEM_SYSRULES_richTextItem_v1"(
                           text: "Related Processes",
                           color: "ACCENT",
                           size: "MEDIUM",
                           style: "STRONG"
                         )
                       ),
                     )

                   }
                 ),  

                 #"SYSTEM_SYSRULES_gridField_v1"(
                   data: local!process,
                   pageSize: 5,
                   columns:{
                     #"SYSTEM_SYSRULES_gridColumn"(
                       label: "Name",
                       value: index(fv!row,"name",{})
                     ),
                     #"SYSTEM_SYSRULES_gridColumn"(
                       label: "Description",
                       value: index(fv!row,"description",{})
                     ),
                     #"SYSTEM_SYSRULES_gridColumn"(
                       label: "Reference Number",
                       value: index(fv!row,"euc_reference_number",{})
                     ),
                     #"SYSTEM_SYSRULES_gridColumn"(
                       label: "Is Active",
                       value:  #"SYSTEM_SYSRULES_imageField_v1"(
                         images: {
                           #"SYSTEM_SYSRULES_documentImage"(
                             document: #"SYSTEM_SYSRULES_iconIndicator"(
                               icon: if(
                                 contains(
                                   toboolean(
                                     index(fv!row, "is_active", {})
                                   ),
                                   true()
                                 ),
                                 "STATUS_OK",
                                 "STATUS_NOTDONE"
                               )
                             ),
                             caption: if(
                               contains(
                                 toboolean(
                                   index(fv!row, "is_active", {})
                                 ),
                                 true()
                               ),
                               "Active",
                               "In-Active"
                             )
                           )
                         }
                       ),
                       align: "CENTER"
                     )
                   }
                 )}),{})),
             #"SYSTEM_SYSRULES_richTextDisplayField"(),
             #"SYSTEM_SYSRULES_columnsLayout"(
               columns:{
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents: {
                     #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_63514"(
                       nonWorkingDay:ri!calendarNonWorkingDay
                     )
                   }
                 )

               }
             ),
             #"SYSTEM_SYSRULES_richTextDisplayField"(),
             #"SYSTEM_SYSRULES_columnsLayout"(
               columns: {
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents: {

                     #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_287171"(
                       label: "Year",
                       placeholderLabel: "Select Year",
                       choiceLabels: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_154377",
                       choiceValues: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_154377",
                       value: ri!year,
                       saveInto: ri!year,
                       instructions: "Please select Year before adding the exceptional working days and holidays"
                     )
                   }
                 ),
                 #"SYSTEM_SYSRULES_columnLayout"(),
                 #"SYSTEM_SYSRULES_columnLayout"()
               }
             ),
             #"SYSTEM_SYSRULES_richTextDisplayField"(),
             #"SYSTEM_SYSRULES_columnsLayout"(
               columns: {
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents: {
                     #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_129056"(
                       refCalendarHoliday:ri!refCalendarHoliday,
                       year: ri!year
                     )

                   }
                 ),
                 #"SYSTEM_SYSRULES_columnLayout"(
                   contents: {
                     #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_63667"(
                       exceptionWorkingDay:ri!calendarExceptionWorkingDay,
                       nonWorkingDay:ri!calendarNonWorkingDay,
                       calendarHoliday: ri!refCalendarHoliday,
                       year: ri!year
                     )
                   }
                 )
               }
             ),
             #"SYSTEM_SYSRULES_richTextDisplayField"(),
            
           }

         ),
         /*------------------------------------------------------------------------------------------*/

         #"SYSTEM_SYSRULES_ButtonLayout"(
           primaryButtons: #"SYSTEM_SYSRULES_ButtonWidget"(
             label:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[1],
             value:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[1],
             saveInto: {ri!buttonAction,
             a!save(
               ri!refCalendarCountryDetails.start_working_time,
               concat(
                 if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!hour),
                   if(
                     #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                       index(ri!refCalendarCountryDetails,"start_working_time",{})
                     ),
                     null,
                     tointeger(index(split(  index(ri!refCalendarCountryDetails,"start_working_time","") ,":"),1,{}))
                     ),
                     local!hour
                 ),
                 ":", 
                 
                 if(
                   #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                     local!minute
                   ),
                   if(
                     #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                       index(ri!refCalendarCountryDetails,"start_working_time",{})
                     ),
                     null,
                     tostring(
                       index(
                         split(index(split(index(ri!refCalendarCountryDetails,"start_working_time",""),":"),2,{}) ," "),1,""
                       )
                     )
                   ),
                   local!minute
                 )
                 
                 
                 ," ",
                 
                 if(
                   #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                     local!meridiem
                   ),
                   if(
                     #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                       index(ri!refCalendarCountryDetails,"start_working_time",{})
                     ),
                     "",    
                     index(
                       split(index(split(index(ri!refCalendarCountryDetails,"start_working_time",""),":"),2,{}) ," "),2,""
                     )

                   ),
                   local!meridiem
                 )
                 
               )
             ),
             a!save(
               ri!refCalendarCountryDetails.end_working_time,
               concat(
                 if(
                   #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                     local!hour1
                   ),
                   if(
                     #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                       index(ri!refCalendarCountryDetails,"end_working_time",{})
                     ),
                     null,
                     tointeger(index(split(  index(ri!refCalendarCountryDetails,"end_working_time","") ,":"),1,{}))
                   ),
                   local!hour1
                 )                 
                 , ":", 
                 
                 if(
                   #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                     local!minute1
                   ),
                   if(
                     #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                       index(ri!refCalendarCountryDetails,"end_working_time",{})
                     ),
                     null,
                     tostring(
                       index(
                         split(index(split(index(ri!refCalendarCountryDetails,"end_working_time",""),":"),2,{}) ," "),1,""
                       )
                     )
                   ),
                   local!minute1
                 )
                 
                 ," ",
                 
                 if(
                   #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                     local!meridiem1
                   ),
                   if(
                     #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                       index(ri!refCalendarCountryDetails,"end_working_time",{})
                     ),
                     "",    
                     index(
                       split(index(split(index(ri!refCalendarCountryDetails,"end_working_time",""),":"),2,{}) ," "),2,""
                     )

                   ),
                   local!meridiem1
                 )
               )
             ),
             
             a!save(
               ri!refCalendarHoliday,
               #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_127145"(
                 modifiedBy: loggedInUser(),
                 modifiedOn: now(),
                 refCalendarHoliday: ri!refCalendarHoliday
               )
             ),
             a!save(
               ri!calendarExceptionWorkingDay,
               #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_69133"(
                 modifiedBy: loggedInUser(),
                 modifiedOn: now(),
                 refCalendarExceptionWorkingDayList: ri!calendarExceptionWorkingDay
               )
             ),
             a!save(
               ri!calendarNonWorkingDay,
               #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_125847"(
                 calendarNonWorkingDay: ri!calendarNonWorkingDay,
                 modifiedBy: loggedInUser(),
                 modifiedOn: now()
               )
             ),
             a!save(
               ri!refCalendarCountryDetails,
               #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_125372"(
                 modifiedBy: loggedInUser(),
                 modifiedOn: now(),
                 calendarCountryDetails: ri!refCalendarCountryDetails
               )
             )
             },
             submit:true(),
             style:"PRIMARY",
             validate: true()
           ),
           secondaryButtons:  #"SYSTEM_SYSRULES_ButtonWidget"(
             label: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[7],
             value: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[7],
             saveInto: {
               ri!buttonAction,
               a!save(
                 local!addcal,
                 false()
               ),
               a!save(
                 ri!activeStep,
                 0
               ),
               a!save(
                 ri!labelAdd,
                 0
               ),
               a!save(
                 ri!CalendarId,
                 null
               ),
               a!save(
                 local!hour,
                 null
               ),
               a!save(
                 local!hour1,
                 null
               ),
               a!save(
                 local!minute,
                 null
               ),
               a!save(
                 local!minute1,
                 null
               ),
               a!save(
                 local!meridiem,
                 null
               ),
               a!save(
                 local!meridiem1,
                 null
               ),
               
               a!save(
                 ri!refCalendarCountryDetails,
                 null
               ),
               a!save(
                 ri!calendarExceptionWorkingDay,
                 null
               ),
               a!save(
                 ri!calendarNonWorkingDay,
                 null
               ),
               a!save(
                 ri!refCalendarHoliday,
                 null
               ),
               a!save(
                 ri!year,
                 null
               ),
               a!save(ri!isInactive,
               null),
               a!save(ri!isActive,
               null)
               
             },
             submit: false()
           )
         )
       }
     
   )
 
)</definition>
        <namedTypedValue>
            <name>buttonAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>refCalendarCountryDetails</name>
            <type>
                <name>EAP_T_RefCalendarCountryDetails</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>activeStep</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>calendarNonWorkingDay</name>
            <type>
                <name>EAP_T_RefCalendarNonWorkingDay?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>calendarExceptionWorkingDay</name>
            <type>
                <name>EAP_T_RefCalendarExceptionWorkingDay?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>labelAdd</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>refCalendarHoliday</name>
            <type>
                <name>EAP_T_RefCalendarHoliday?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>CalendarId</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>year</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isReadonly</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isActive</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isInactive</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>buttonAction</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:n1="urn:com:appian:types:eap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="n1:EAP_T_RefCalendarCountryDetails"/>
                    <a:nameRef>refCalendarCountryDetails</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>activeStep</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>calendarNonWorkingDay</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>calendarExceptionWorkingDay</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>labelAdd</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>refCalendarHoliday</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>CalendarId</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>year</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>isReadonly</a:nameRef>
                    <a:id>10</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>isActive</a:nameRef>
                    <a:id>11</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>isInactive</a:nameRef>
                    <a:id>12</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e4cd-1af4-8000-5255-1bef901bef90_94459"/>
        <historyInfo versionUuid="_a-0000e4cd-1af4-8000-5255-1bef901bef90_173743"/>
        <historyInfo versionUuid="_a-0000e4cd-1af4-8000-5255-1bef901bef90_188639"/>
        <historyInfo versionUuid="_a-0000e4dd-0d8b-8000-5257-1bef901bef90_216031"/>
        <historyInfo versionUuid="_a-0000e4e9-ef8d-8000-5259-1bef901bef90_364505"/>
        <historyInfo versionUuid="_a-0000e4e9-ef8d-8000-5259-1bef901bef90_376961"/>
        <historyInfo versionUuid="_a-0000e505-ae05-8000-525c-1bef901bef90_414257"/>
    </history>
</contentHaul>

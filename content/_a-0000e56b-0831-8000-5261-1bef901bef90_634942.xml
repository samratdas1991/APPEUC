<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e56b-0831-8000-5261-1bef901bef90_705566</versionUuid>
    <interface>
        <name>EAP_ProcessExtensionAdminInterface</name>
        <uuid>_a-0000e56b-0831-8000-5261-1bef901bef90_634942</uuid>
        <description>Interface for data entry to eap process extension.</description>
        <parentUuid>_a-0000e4c3-7a1b-8000-524f-1bef901bef90_6580</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!manageLabel: if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      ri!process_id
    ),
    {},
    concat(
      "Manage Process Extension Details",
      "|",
     index(
       #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
         processId :ri!process_id
       ),
       "name",
       {}
     ) 
     
    )
  ),
 
  local!processExtension:#"_a-0000e56b-0831-8000-5261-1bef901bef90_637528"(
    isActive: true(),
    
  ),
 
 
  local!processDetail: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
   
    processId: ri!process_id
  ),
  
  local!centerDetails: #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617954"(
    isActive: 1
  ),

  local!MGdL8Details: #"_a-0000e54c-ce50-8000-5260-1bef901bef90_619050"(
   isActive: 1
  ),
  {
    #"SYSTEM_SYSRULES_sectionLayout_v1"(
      contents: {
        #"_a-0000e518-940a-8000-525e-1bef901bef90_524783"(
          label:  local!manageLabel,
          color: "ACCENT"
        )
      },
      divider: "BELOW"
    ),
   
    #"SYSTEM_SYSRULES_gridField_v1"(
      showWhen:if(or(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!process_id),ri!process_id=0),true(),false()),
      label: "",
      labelPosition: "ABOVE",
      data:local!processExtension,
      columns: {

        #"SYSTEM_SYSRULES_gridColumn"(
          label:"Process Name",
          sortField :"process_id",
          value: if(
            #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
            index(fv!row,"process_id",{})),
            "N/A",
            index(
              #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
                processId:index(fv!row,"process_id",{})),"name",{})
        )),

        #"SYSTEM_SYSRULES_gridColumn"(
          label:"Center",
          value: 
          if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
            index(fv!row,"center_id",{})),
            "N/A",
            index(
              #"_a-0000e54c-ce50-8000-5260-1bef901bef90_617954"(
                centerId : index(fv!row,"center_id",{})),"name",{})
           ),
          
        ),
      
        #"SYSTEM_SYSRULES_gridColumn"(
          label:"Segment L8 ",
          sortField :"mgd_seg_l8_id",
          value: if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
            index(fv!row,"mgd_seg_l8_id",{})
          ),
          "N/A",
          index(
            #"_a-0000e54c-ce50-8000-5260-1bef901bef90_619050"(
              mgdsegl8Id  :  index(fv!row,"mgd_seg_l8_id",{})
            ),"name",{})
          )


        ),
        #"SYSTEM_SYSRULES_gridColumn"(
          label: "Created By",
          value:#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3251824"(index(local!processExtension,"created_by",{})),
          showWhen: ri!readOnly=true()
        ),
        #"SYSTEM_SYSRULES_gridColumn"(
          label: "Is Active",
          sortField :"is_active",
          value:  #"SYSTEM_SYSRULES_imageField_v1"(
            images: {
              #"SYSTEM_SYSRULES_documentImage"(
                document: #"SYSTEM_SYSRULES_iconIndicator"(
                  icon: if(
                    contains(
                      toboolean(
                        index(fv!row, "is_active", {})
                      ),
                      true()
                    ),
                    "STATUS_OK",
                    "STATUS_NOTDONE"
                  )
                ),
                caption: if(
                  contains(
                    toboolean(
                      index(fv!row, "is_active", {})
                    ),
                    true()
                  ),
                  "Active",
                  "In-Active"
                )
              )
            }
          ),
          align: "CENTER"
        ),
       
        if(
          ri!readOnly&lt;&gt;true(),
          #"SYSTEM_SYSRULES_gridColumn"(
            label: "Edit",
            value: #"SYSTEM_SYSRULES_richTextDisplayField"(
              value: {
                #"SYSTEM_SYSRULES_richTextIcon"(
                  icon: "edit",
                  caption: "Edit",
                  link:if(toboolean(ri!activeStep)=false(),
                  #"SYSTEM_SYSRULES_dynamicLink"(
                    value: 1,
                    saveInto: 
                    {
                      ri!activeStep,
                      a!save(
                        ri!process_id,
                        tointeger(index(fv!row,"process_id",{}))

                      ),
                      a!save(
                        ri!processExtension,
                        #"_a-0000e56b-0831-8000-5261-1bef901bef90_637528"(
                          processId  :  ri!process_id
                        ),

                      ),
                    }
                  ),{}),
                  linkStyle: "STANDALONE",
                  color:  if(toboolean(ri!activeStep)=false(),"ACCENT","SECONDARY"),
                  size: "MEDIUM_PLUS"
                )
              },
              align: "CENTER"
            ),
            align: "CENTER"
          ),
          {}
          
        )
        
      },
      validations: {}
    ),
    
   
    
    #"SYSTEM_SYSRULES_richTextDisplayField"(),
    #"SYSTEM_SYSRULES_sectionLayout_v1"(
      contents: {
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_dropdownField"(
                  label: "Process Name",
                  placeholderLabel: "--Select Process--",
                  required: true(),
                  choiceLabels: touniformstring(
                    index(
                      local!processDetail,
                      "name",
                      {}
                    )
                  ),
                  choiceValues: tointeger(
                    index(
                      local!processDetail,
                      "process_id",
                      {}
                    )
                  ),
                  value: if(
                    #"_a-0000e4c6-e892-8000-5254-1bef901bef90_47169"(
                      value: index(
                        ri!processExtension,
                        "process_id",
                        {}
                      ),
                      choiceValue: tointeger(
                        union(
                          index(
                            local!processDetail,
                            "process_id",
                            {}
                          ),
                          index(
                            local!processDetail,
                            "process_id",
                            {}
                          )
                        )
                      )
                    ),
                    index(
                      ri!processExtension,
                      "process_id",
                      {}
                    ),
                    null
                  ),
                  saveInto: {
                    a!save(ri!processExtension.process_id,save!value),
                    if(
                      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                        index(
                          ri!processExtension,
                          "process_id",
                          {}
                        )
                      ),
                      a!save(
                        ri!processExtension.center_id,
                        null
                      ),
                      {}
                    ),
                    if(
                      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                        index(
                          ri!processExtension,
                          "process_id",
                          {}
                        )
                      ),
                      a!save(
                        ri!processExtension.mgd_seg_l7_id,
                        null
                      ),
                      {}
                    ),
                    if(
                      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                        index(
                          ri!processExtension,
                          "process_id",
                          {}
                        )
                      ),
                      a!save(
                        ri!processExtension.mgd_seg_l8_id,
                        null
                      ),
                      {}
                    )
                  },
                  validations: {
                    if(or(ri!process_id=0,#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!process_id)),if(
                      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                        index(
                          #"_a-0000e56b-0831-8000-5261-1bef901bef90_637528"(
                            processId: index(
                              ri!processExtension,
                              "process_id",
                              {}
                            ),
                            isActive: 1
                          ),"center_id",{}
                        )
                      ),{},"Center Already Exist For This Process"
                    ),{})
                  }
                )
              },
              showWhen:if(or(ri!process_id=0,#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!process_id)),true,false())
            ),
            #"SYSTEM_SYSRULES_columnLayout"(
              contents:
              {
                #"SYSTEM_SYSRULES_textField"(
                  readOnly: true(),
                  label: "EUC#",
                  value: index(
                    local!processDetail,
                    "euc_reference_number",
                    {}
                  ),
                  showWhen: if(or(ri!process_id=0,#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!process_id)),true,false())
                )
                /*rule!EAP_Utils_CustomPicker(*/
                  /*pickerLabel : "EUC Refernce Number",*/
/**/
                  /*placeholder: "--Search EUC Reference Number--",*/
                  /*maxSelections: 1,*/
                  /*identifiers: union(touniformstring(index(local!eucnumber,"euc_reference_number",{})),*/
                  /*touniformstring(index(local!eucnumber,"euc_reference_number",{}))*/
                  /*),*/
                  /*choiceLabels:union(index(local!eucnumber,"euc_reference_number",{}),*/
                  /*index(local!eucnumber,"euc_reference_number",{})), */
                  /*selectedValue:touniformstring(local!eucRefrenceNumber),*/
                  /*saveInto: {*/
                   /*a!save(local!eucRefrenceNumber,save!value),*/
                    /*a!save(local!processId,*/
                    /*index(rule!EAP_QE_RefProcess(*/
                      /*eucReferenceNumber:local!eucRefrenceNumber*/
                    /*),"process_id",{}))*/
/*                    */
/*                    */
                  /*}*/
                /*)*/
                
              },
             
            )
          }
        ),
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_dropdownField"(
                  label: "Center",
                  placeholderLabel: "--Select Center--",
                  required: true(),
                  disabled: if(
                    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                     ri!process_id
                    ),
                    true,
                    false
                  ),
                  choiceLabels: touniformstring(
                    index(
                      local!centerDetails,
                      "name",
                      {}
                    )
                  ),
                  choiceValues: tointeger(
                    index(
                      local!centerDetails,
                      "center_id",
                      {}
                    )
                  ),
                  value: if(
                    #"_a-0000e4c6-e892-8000-5254-1bef901bef90_47169"(
                      value: index(
                        ri!processExtension,
                        "center_id",
                        {}
                      ),
                      choiceValue: tointeger(
                        index(
                          local!centerDetails,
                          "center_id",
                          {}
                        )
                      )
                    ),
                    ri!processExtension.center_id,
                    null
                  ),
                  saveInto: {
                    a!save(ri!processExtension.center_id,save!value),
                    a!save(ri!processExtension.process_id,ri!process_id)
                  }
                )
              }
            ),
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_dropdownField"(
                  label: "Managed Segment L8",
                  placeholderLabel: "--Select Manager L8--",
                  required: true(),
                  disabled: if(
                    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                      index(
                        ri!processExtension,
                        "center_id",
                        {}
                      )
                    ),
                    true,
                    false
                  ),
                  choiceLabels: touniformstring(
                    index(
                      local!MGdL8Details,
                      "name",
                      {}
                    )
                  ),
                  choiceValues: tointeger(
                    index(
                      local!MGdL8Details,
                      "mgd_seg_l8_id",
                      {}
                    )
                  ),
                  value: if(
                    #"_a-0000e4c6-e892-8000-5254-1bef901bef90_47169"(
                      value: index(
                        ri!processExtension,
                        "mgd_seg_l8_id",
                        {}
                      ),
                      choiceValue: tointeger(
                        index(
                          local!MGdL8Details,
                          "mgd_seg_l8_id",
                          {}
                        )
                      )
                    ),
                    index(
                      ri!processExtension,
                      "mgd_seg_l8_id",
                      {}
                    ),
                    null
                  ),
                  saveInto: {a!save(ri!processExtension.mgd_seg_l8_id,save!value),
                  a!save(ri!processExtension.created_by,loggedInUser()),
                  a!save(ri!processExtension.created_on,now()),
                  a!save(ri!processExtension.modified_by,loggedInUser()),
                  a!save(ri!processExtension.modified_on,now())}
                )
              }
            ),
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_radioButtonField"(
                  label: "Is Active",
                  choiceLayout: "COMPACT",
                  choiceLabels: {
                    "Active",
                    "In Active"
                  },
                  choiceValues: {
                    1,
                    0
                  },
                  value: if(
                    contains(
                      tointeger(
                        {
                          1,
                          0
                        }
                      ),
                      tointeger(
                        index(
                          ri!processExtension,
                          "is_active",
                          {}
                        )
                      )
                    ),
                    index(
                      ri!processExtension,
                      "is_active",
                      {}
                    ),
                    null
                  ),
                  required: true,
                  saveInto: ri!processExtension.is_active
                )
              }
            )
          }
        ),
       
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            
          }
        ),
       
      },
      showWhen: if(or(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!process_id),ri!process_id=0),false,true)
    ),
    if(
      ri!readOnly&lt;&gt;true(),
      #"SYSTEM_SYSRULES_ButtonLayout"(
        primaryButtons: #"SYSTEM_SYSRULES_ButtonWidget"(
          label: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[1],
          value: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[1],
          saveInto: {
            ri!buttonAction,

            a!save(ri!activeStep,false())

          },
          submit: true(),
          style: "PRIMARY",
          validate: true(),

          showWhen: if(or(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(ri!process_id),ri!process_id=0),false,true)
        ),

        secondaryButtons:  {
          
          #"SYSTEM_SYSRULES_ButtonWidget"(
            label: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[7],
            value: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[7],
            saveInto: {
              ri!buttonAction,
              a!save(ri!activeStep,false()),
              a!save(ri!process_id,null)
            },
            showWhen: or(toboolean(ri!activeStep)=true()),


          ),
          #"SYSTEM_SYSRULES_ButtonWidget"(
            label: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[2],
            value: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[2],
            saveInto: {ri!buttonAction,
            },
            submit: true(),
            style: "NORMAL",
            showWhen: or(toboolean(ri!activeStep)=false()),
            validate: false()
          )}
      ),
      {},
     
    )
    
  }
)</definition>
        <namedTypedValue>
            <name>processExtension</name>
            <type>
                <name>EAP_T_PROCESS_EXTENSION?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>buttonAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>activeStep</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>process_id</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>EUCRefNumber</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>readOnly</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>processExtension</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>buttonAction</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>activeStep</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>process_id</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>EUCRefNumber</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>readOnly</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_666815"/>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_667157"/>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_674266"/>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_705566"/>
    </history>
</contentHaul>

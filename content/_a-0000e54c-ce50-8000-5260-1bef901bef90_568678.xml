<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e54c-ce50-8000-5260-1bef901bef90_609044</versionUuid>
    <interface>
        <name>EAP_DynamicParsingConfigurationMainForm</name>
        <uuid>_a-0000e54c-ce50-8000-5260-1bef901bef90_568678</uuid>
        <description>Dynamic screen for capturing dynamic parsing config</description>
        <parentUuid>_a-0000e4c3-7a1b-8000-524f-1bef901bef90_6580</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!fileEntityData: if(
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
      index(
        ri!uniqueIdentifiers,
        "in_file_entity_mapping_id",
        {}
      )
    ),
    {},
    #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_10331"(
      inFileEntityMappingId: index(
        ri!uniqueIdentifiers,
        "in_file_entity_mapping_id",
        {}
      )
    )
  ),
  local!dynamicConfig:#"_a-0000e54c-ce50-8000-5260-1bef901bef90_567535"(
    inFileEntityMappingId: index(
      ri!uniqueIdentifiers,
      "in_file_entity_mapping_id",
      {}
    ),
    processId: index(
      ri!uniqueIdentifiers,
      "process_id",
      {}
    ),
    isActive: 1
  ),
  {
    #"SYSTEM_SYSRULES_cardLayout"(
      contents: {
        /*Go Back*/
        #"SYSTEM_SYSRULES_ButtonArrayLayout"(
          align: "START",
          buttons: {
            #"SYSTEM_SYSRULES_ButtonWidget"(
              style: "SECONDARY",
              size: "SMALL",
              label: "GO BACK",
              icon: "mail-reply",
              saveInto: {
                a!save(
                  ri!editDynamicConfig,
                  false()
                ),
                a!save(
                  ri!editConfig,
                  null
                ),
                a!save(
                  ri!dynamicConfigDetails,
                  null
                ),
                a!save(
                  ri!dynamicConfig,
                  null
                ),
                a!save(
                  ri!uniqueIdentifiers.dynamicConfigId,
                  null
                )
              }
            )
          }
        ),
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                if(
                  and(
                    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                      index(
                        local!dynamicConfig,
                        "eap_pr_dynamic_conf_id",
                        {}
                      )
                    ),
                    ri!isReadOnly
                  ),
                  /*No Config Present*/
                  #"SYSTEM_SYSRULES_richTextDisplayField"(
                    value: #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: concat(
                        "No Dynamic Configurations Found For Entity: ",
                        index(
                          local!fileEntityData,
                          "entity_name",
                          {}
                        ),
                        " | ",
                        "SQ#",
                        index(
                          local!fileEntityData,
                          "sequence_order",
                          {}
                        )
                      ),
                      style: {
                        "EMPHASIS",
                        "STRONG"
                      },
                      color: "ACCENT"
                    )
                  ),
                  {
                    /*Dynamic Config Info*/
                    #"SYSTEM_SYSRULES_richTextDisplayField"(
                      value: {
                        #"SYSTEM_SYSRULES_richTextItem_v1"(
                          style: {
                            "STRONG"
                          },
                          color: "ACCENT",
                          size: "MEDIUM",
                          text: concat(
                            "Dynamic Configurations For Entity: ",
                            index(
                              local!fileEntityData,
                              "entity_name",
                              {}
                            ),
                            " | ",
                            "SQ#",
                            index(
                              local!fileEntityData,
                              "sequence_order",
                              {}
                            ),
                            if(
                              #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                index(
                                  local!fileEntityData,
                                  "sheet_name",
                                  {}
                                )
                              ),
                              {
                                if(
                                  #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                    index(
                                      local!fileEntityData,
                                      "sheet_index",
                                      {}
                                    )
                                  ),
                                  {},
                                  {" | Sheet Index: ",
                                  index(
                                    local!fileEntityData,
                                    "sheet_index",
                                    {}
                                  )
                                  }
                                )
                              },
                              {" | Sheet Name: ",
                              index(
                                local!fileEntityData,
                                "sheet_name",
                                {}
                              )
                              }
                            ),
                            
                          )
                        )
                      }
                    ),
                    /*Select Configuration Grid*/
                    #"SYSTEM_SYSRULES_gridLayout"(
                      shadeAlternateRows: false(),
                      label: "",
                      headerCells: {
                        #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                          label: "Configuration Name"
                        ),
                        #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                          label: if(
                            ri!isReadOnly,
                            "View Details",
                            "Edit Details"
                          ),
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                          label: "Is Active",
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                          label: "",
                          showWhen: not(
                            ri!isReadOnly
                          )
                        )
                      },
                      columnConfigs: {
                        #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                          width: "DISTRIBUTE",
                          weight: 2
                        ),
                        #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                          width: "ICON"
                        ),
                        #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                          width: "ICON"
                        ),
                        #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                          width: "ICON"
                        )
                      },
                      rows: {
                        #"SYSTEM_SYSRULES_applyComponents"(
                          function: #"_a-0000e54c-ce50-8000-5260-1bef901bef90_571470"(
                            index: _,
                            isReadOnly: ri!isReadOnly,
                            uniqueIdentifiers: ri!uniqueIdentifiers,
                            masterLookUpData: ri!masterLookUpData,
                            dynamicConfig: ri!dynamicConfig,
                            editConfig: ri!editConfig,
                            dynamicConfigDetails: ri!dynamicConfigDetails
                          ),
                          array: if(
                            or(
                              #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                                ri!dynamicConfig
                              ),
                              count(
                                ri!dynamicConfig
                              ) = 0
                            ),
                            null,
                            tointeger(
                              enumerate(
                                count(
                                  ri!dynamicConfig
                                )
                              ) + 1
                            )
                          )
                        )
                      },
                      addRowLink: if(
                        or(
                          ri!isReadOnly,
                          count(
                            ri!dynamicConfig
                          ) = count(
                            #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12255"(
                              MasterLookup: #"_a-0000e4cd-1af4-8000-5255-1bef901bef90_124946"(
                                masterLookUpData: ri!masterLookUpData,
                                categoryGroup: #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3238117"[8]
                              ),
                              UniqueKey: #"_a-0000e54c-ce50-8000-5260-1bef901bef90_569753"[2],
                              Column: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_16271"[3]
                            )
                          )
                        ),
                        {},
                        #"SYSTEM_SYSRULES_dynamicLink"(
                          label: "Add Configuration",
                          value: 'type!{urn:com:appian:types:eap}EAP_T_PR_DYNAMIC_CONF'(
                            in_file_entity_mapping_id: index(
                              ri!uniqueIdentifiers,
                              "in_file_entity_mapping_id",
                              {}
                            ),
                            process_id: index(
                              ri!uniqueIdentifiers,
                              "process_id",
                              {}
                            ),
                            created_by: loggedInUser(),
                            created_on: now(),
                            is_active: true()
                          ),
                          saveInto: a!save(
                            ri!dynamicConfig,
                            append(
                              ri!dynamicConfig,
                              save!value
                            )
                          )
                        )
                      )
                    )
                  }
                )
              }
            ),
            if(
              ri!editConfig,
              #"SYSTEM_SYSRULES_columnLayout"(
                contents: {
                  /*a!paragraphField(value:ri!masterLookupData),*/
                  /*Config Info*/
                  #"SYSTEM_SYSRULES_richTextDisplayField"(),
                  #"SYSTEM_SYSRULES_richTextDisplayField"(),
                  #"SYSTEM_SYSRULES_richTextDisplayField"(),
                  {
                    #"SYSTEM_SYSRULES_cardLayout"(
                      marginBelow: "STANDARD",
                      contents: {
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          value: {
                            #"SYSTEM_SYSRULES_richTextItem_v1"(
                              style: {
                                "STRONG"
                              },
                              color: "ACCENT",
                              size: "MEDIUM",
                              text: concat(
                                "Configuration Details For: ",
                                index(
                                  index(
                                    ri!dynamicConfig,
                                    wherecontains(
                                      tointeger(
                                        index(
                                          ri!uniqueIdentifiers,
                                          "dynamicConfigId",
                                          {}
                                        )
                                      ),
                                      tointeger(
                                        index(
                                          ri!dynamicConfig,
                                          "eap_pr_dynamic_conf_id",
                                          {}
                                        )
                                      )
                                    ),
                                    {}
                                  ),
                                  "config_name",
                                  {}
                                )
                              )
                            )
                          }
                        ),
                        #"SYSTEM_SYSRULES_gridLayout"(
                          label: "",
                          headerCells: #"SYSTEM_SYSRULES_forEach"(
                            items: ri!dynamicConfigDetails,
                            expression: #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                              label:if(
                                ri!isReadOnly,
                                index(fv!item,"attribute_name",{}),
                                index(index(
                                  ri!masterLookupData,
                                  wherecontains(
                                    tostring(index(fv!item,"attribute_name",{})),
                                    touniformstring(index(ri!masterLookupData,"code",{}))
                                  ),
                                  {}
                                ),"label",{})
                              ),
                              align: "LEFT"
                            )
                          ),
                          columnConfigs: #"SYSTEM_SYSRULES_forEach"(
                            items: ri!dynamicConfigDetails,
                            expression: #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                              width: "DISTRIBUTE"
                            )
                          ),
                          rows: #"SYSTEM_SYSRULES_forEach"(
                            items: 'type!{urn:com:appian:types:eap}EAP_T_PR_DYNAMIC_CONF_DETAIL'(),
                            expression: #"SYSTEM_SYSRULES_gridRowLayout"(
                              contents: #"SYSTEM_SYSRULES_forEach"(
                                items: ri!dynamicConfigDetails,
                                expression: #"SYSTEM_SYSRULES_textField"(
                                  value: {
                                    index(
                                      fv!item,
                                      "attribute_value",
                                      {}
                                    )
                                  },
                                  readOnly: ri!isReadOnly,
                                  saveInto: {
                                    a!save(
                                      fv!item.attribute_value,
                                      save!value
                                    )
                                  }
                                )
                              )
                            )
                          )
                        )
                      },
                      showBorder: false(),
                      style: "#D0D3D4"/*cons!EAP_COLORS_HEX_CODE[9]*/
                      
                    ),
                    /*Notes / Warning Card*/
                    if(
                      ri!isReadOnly,
                      {},
                      #"_a-0000e54c-ce50-8000-5260-1bef901bef90_591645"(
                        dynamicConfig: ri!dynamicConfig
                      )
                    ) 
                  }
                }
              ),
              {}
            )
          }
        ),
        /*if(*/
        /*ri!editConfig,*/
        /*a!columnsLayout(*/
        /*columns: {*/
        /*Configuration Details*/
        /*a!columnLayout(*/
        /*contents: {*/
        /*a!richTextDisplayField(),*/
        /*a!richTextDisplayField(*/
        /*value: a!richTextItem(*/
        /*text: "CONFIGURATION DETAILS:",*/
        /*style: "STRONG"*/
        /*)*/
        /*),*/
        /*{*/
        /*a!forEach(*/
        /*items: ri!dynamicConfigDetails,*/
        /*expression: rule!EAP_SA_GenericTextField(*/
        /*label: fv!item.attribute_name,*/
        /*labelPosition: "ABOVE",*/
        /*readOnly: ri!isReadOnly,*/
        /*value: {*/
        /*index(fv!item,"attribute_value",{})*/
        /*},*/
        /*saveInto: {*/
        /*a!save(*/
        /*fv!item.attribute_value,*/
        /*save!value*/
        /*)*/
        /**/
        /*}*/
        /*)*/
        /*)*/
        /*}*/
        /*}*/
        /*),*/
        /*a!columnLayout()*/
        /*}*/
        /*),*/
        /*{}*/
        /*),*/
        #"SYSTEM_SYSRULES_ButtonLayout"(
          primaryButtons: {
            #"SYSTEM_SYSRULES_ButtonWidget"(
              label: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[4],
              style: "",
              value: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[4],
              submit: true,
              saveInto: {
                ri!ButtonAction,
                
              },
              showWhen: not(
                ri!isReadOnly
              )
            )
          },
          secondaryButtons: {}
        )
      },
      showBorder: false,
      style: "#F9F9F9"
    )
  }
)</definition>
        <namedTypedValue>
            <name>editDynamicConfig</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>masterLookUpData</name>
            <type>
                <name>Variant</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>dynamicConfig</name>
            <type>
                <name>EAP_T_PR_DYNAMIC_CONF?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>dynamicConfigDetails</name>
            <type>
                <name>EAP_T_PR_DYNAMIC_CONF_DETAIL?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>uniqueIdentifiers</name>
            <type>
                <name>EAP_Temp_ParsingUniqueIdentifiers</name>
                <namespace>urn:com:appian:types:EAP</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isReadOnly</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>editConfig</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>buttonAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">true</a:value>
                    <a:nameRef>editDynamicConfig</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_7827"(
  categoryGroup: {
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3238117"[2],
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3238117"[4],
    #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3238117"[8]
  },
  isActive: true(),
  pagingInfo: #"SYSTEM_SYSRULES_pagingInfo"(
    1,
    - 1,
    #"SYSTEM_SYSRULES_sortInfo"(
      "sort_order",
      true()
    )
  )
)</a:value>
                    <a:nameRef>masterLookUpData</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>dynamicConfig</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>dynamicConfigDetails</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:n1="urn:com:appian:types:EAP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="n1:EAP_Temp_ParsingUniqueIdentifiers"/>
                    <a:nameRef>uniqueIdentifiers</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>isReadOnly</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">true</a:value>
                    <a:nameRef>editConfig</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>buttonAction</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e54c-ce50-8000-5260-1bef901bef90_593681"/>
        <historyInfo versionUuid="_a-0000e54c-ce50-8000-5260-1bef901bef90_595049"/>
        <historyInfo versionUuid="_a-0000e54c-ce50-8000-5260-1bef901bef90_609044"/>
    </history>
</contentHaul>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e56b-0831-8000-5261-1bef901bef90_647972</versionUuid>
    <interface>
        <name>EAP_CenterMasterScreen</name>
        <uuid>_a-0000e54c-ce50-8000-5260-1bef901bef90_617682</uuid>
        <description>hold interface to handle all centers</description>
        <parentUuid>_a-0000e4c3-7a1b-8000-524f-1bef901bef90_6580</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!editCenterId,
  local!viewCenterId,
  local!centerName,
  local!center:#"_a-0000e54c-ce50-8000-5260-1bef901bef90_617954"(
    isActive: 1,
    name:local!centerName
  ),
  local!manageSegmentL7:#"_a-0000e54c-ce50-8000-5260-1bef901bef90_618027"(
    isActive:1
  ),
  local!readOnly:false(),

  {
    #"SYSTEM_SYSRULES_sectionLayout_v1"(
      label:"Manage Centers",
      divider:"ABOVE"
    ),
    #"SYSTEM_SYSRULES_columnsLayout"(
      showWhen: toboolean(ri!activeStep)=false(),
      columns:{
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: #"SYSTEM_SYSRULES_textField"(
            placeholder: "--Search Centers--",
            value:local!centerName,
            saveInto: local!centerName
          )
        ),
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: #"SYSTEM_SYSRULES_ButtonLayout"(
            primaryButtons: #"SYSTEM_SYSRULES_ButtonWidget"(
              label:"ADD CENTERS",
              showWhen: and(toboolean(ri!activeStep)=false()),
              saveInto: {
                a!save(
                  ri!activeStep,
                  true()
                ),
                a!save(
                  ri!centers,
                  'type!{urn:com:appian:types:eap}EAP_T_Center'(
                    is_active:1, 
                    created_by:loggedInUser(), 
                    created_on:now(), 
                    modified_by:loggedInUser(), 
                    modified_on:now()
                  ))

              },
              style: "PRIMARY"
            )
          )

        )
      }
    ),
    #"SYSTEM_SYSRULES_gridField_v1"(
      showWhen:toboolean(ri!activeStep)=false(),
      label: "",
      labelPosition: "ABOVE",
      data: local!center,
      columns: {
        #"SYSTEM_SYSRULES_gridColumn"(
          label:"Center Name",
          value:index(fv!row,"name",{})
        ),
        #"SYSTEM_SYSRULES_gridColumn"(
          label:"Display Name",
          value:index(fv!row,"display_name",{})
        ),
        #"SYSTEM_SYSRULES_gridColumn"(
          label:"Description",
          value:index(fv!row,"description",{})
        ),
        #"SYSTEM_SYSRULES_gridColumn"(
          label:"Is Active",
          value: #"SYSTEM_SYSRULES_richTextDisplayField"(
            value: if(
              fv!row.is_active,
              #"SYSTEM_SYSRULES_richTextIcon"(
                icon:"check-circle",
                color:"POSITIVE",
                size:"MEDIUM"
              ),
              #"SYSTEM_SYSRULES_richTextIcon"(
                icon:"times-circle",
                color:"NEGATIVE",
                size:"MEDIUM"
              )
            )
          ),
          align:"CENTER",
          width: "NARROW"
        ),
        #"SYSTEM_SYSRULES_gridColumn"(
          label: "View Detail",
          value:#"SYSTEM_SYSRULES_richTextDisplayField"(
            value: #"SYSTEM_SYSRULES_richTextIcon"(
              icon: if(
                or(tointeger(local!viewCenterId) = tointeger(index(
                  fv!row,
                  "center_id",
                  {}
                ))),"eye-slash","eye"),
                caption: "Click here to view",
                link: #"SYSTEM_SYSRULES_dynamicLink"(
                  label: "View",
                  value: index(
                    fv!row,
                    "center_id",
                    {}
                  ),
                  saveInto: {
                    local!viewCenterId,
                    a!save(local!readOnly,true()),
                    a!save(ri!centers,#"_a-0000e54c-ce50-8000-5260-1bef901bef90_617954"(
                      centerId:  local!viewCenterId
                    )),
                   
                    a!save(ri!activeStep,true())

                  }
                ),
                linkStyle: "STANDALONE",
                size: if(
                  or(tointeger(local!viewCenterId) = tointeger(index(
                    fv!row,
                    "center_id",
                    {}
                  ))),"MEDIUM","STANDARD")
            )
          ),
          align:"CENTER",
          width: "NARROW"
        ),
        #"SYSTEM_SYSRULES_gridColumn"(
          label: "Manage",
          value:#"SYSTEM_SYSRULES_richTextDisplayField"(
            value: #"SYSTEM_SYSRULES_richTextIcon"(
              icon: "cog",
              caption: "Click here to edit",
              link: #"SYSTEM_SYSRULES_dynamicLink"(
                label: "edit",
                value: index(
                  fv!row,
                  "center_id",
                  {}
                ),
                saveInto: {

                  local!editCenterId,
                  a!save(ri!activeStep,true()),
                  a!save(ri!centers,#"_a-0000e54c-ce50-8000-5260-1bef901bef90_617954"(
                    centerId: local!editCenterId
                  )),
                 
                  a!save(local!viewCenterId,null),
                  a!save(local!readOnly,false())
                }
              ),
              linkStyle: "STANDALONE",
              size: "MEDIUM"
            )
          ),
          align:"CENTER",
          width: "NARROW"
        ),
      },
      validations: {}
    ),
    if(
      or(ri!activeStep&lt;&gt;false()),
      {#"_a-0000e54c-ce50-8000-5260-1bef901bef90_617726"(
        centers:ri!centers,
        readOnly: local!readOnly
      ),
      #"SYSTEM_SYSRULES_richTextDisplayField"(),
   
      },
      {}
    ),
    #"SYSTEM_SYSRULES_ButtonLayout"(
      primaryButtons:{
        #"SYSTEM_SYSRULES_ButtonWidget"(
          label:"save",
          value:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[4],
          style:"PRIMARY",
          submit:true(), 
          validate:true(),
          saveInto:{
            ri!buttonAction,
a!save(ri!activeStep,false())

          },
          showWhen: and(ri!activeStep&lt;&gt;false(),toboolean(local!readOnly)&lt;&gt;true())
        
         
        ),


      },
      secondaryButtons: if(
        or(
          ri!activeStep=true()
          
        ),
        #"SYSTEM_SYSRULES_ButtonWidget"(
          label:"Back",
          validate:false(),
          saveInto:{
            a!save(ri!activeStep,false()),
            a!save(ri!centers,null),
           
            a!save(local!viewCenterId,null),
            a!save(local!readOnly,false())
          },

        ),
        #"SYSTEM_SYSRULES_ButtonWidget"(
          label:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[2],
          value:#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[2],
          submit:true(), 
          validate:false(),
          saveInto:ri!buttonAction,
         
          style:"NORMAL"
        )
      )
    )
  })</definition>
        <namedTypedValue>
            <name>activeStep</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>centers</name>
            <type>
                <name>EAP_T_Center</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>buttonAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>activeStep</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:n1="urn:com:appian:types:eap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="n1:EAP_T_Center"/>
                    <a:nameRef>centers</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>buttonAction</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e56b-0831-8000-5261-1bef901bef90_647972"/>
    </history>
</contentHaul>

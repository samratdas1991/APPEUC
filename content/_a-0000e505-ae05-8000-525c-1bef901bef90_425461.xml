<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e5c3-a65f-8000-5268-1bef901bef90_766483</versionUuid>
    <interface>
        <name>EAP_DwfMilestoneEditableGrid</name>
        <uuid>_a-0000e505-ae05-8000-525c-1bef901bef90_425461</uuid>
        <description>Holds dwf milestone editable grid.</description>
        <parentUuid>_a-0000e4c3-7a1b-8000-524f-1bef901bef90_6580</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition> a!localVariables(
   local!getMilestoneData:#"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_350906"(
     isActive:1
   ),
   local!milestoneId,
   local!edit:" ",
   local!activeStep:0,
   #"SYSTEM_SYSRULES_sectionLayout_v1"(
     label:"Manage Milestone",
     contents:{
       #"SYSTEM_SYSRULES_gridField_v1"(
         data: local!getMilestoneData,
         columns: {
           #"SYSTEM_SYSRULES_gridColumn"(
             label: "Name",
             sortField :"name",
             value: if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
               index(fv!row,"name",{})),
               "N/A",
               index(fv!row,"name",{}))
           ),
           #"SYSTEM_SYSRULES_gridColumn"(
             label: "Process Model UUID",
             sortField :"process_model_uuid",
             value: if(#"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
               index(fv!row,"process_model_uuid",{})),
               "N/A",
               index(fv!row,"process_model_uuid",{}))
           ),

           #"SYSTEM_SYSRULES_gridColumn"(
             label: "Use Custom Process UUID ?",
             sortField :"is_enable_custom_process_uuid",
             helpTooltip: "Enable user to use generic process model uuid for the milestone ",
             value:  #"SYSTEM_SYSRULES_imageField_v1"(
               images: {
                 #"SYSTEM_SYSRULES_documentImage"(
                   document: #"SYSTEM_SYSRULES_iconIndicator"(
                     icon: if(
                       contains(
                         toboolean(
                           index(fv!row, "is_enable_custom_process_uuid", {})
                         ),
                         true()
                       ),
                       "STATUS_OK",
                       "STATUS_NOTDONE"
                     )
                   ),
                   caption: if(
                     contains(
                       toboolean(
                         index(fv!row, "is_enable_custom_process_uuid", {})
                       ),
                       true()
                     ),
                     "Active",
                     "In-Active"
                   )
                 )
               }
             ),
             align: "CENTER",
             width:"NARROW_PLUS"
           ),
           #"SYSTEM_SYSRULES_gridColumn"(
             label: "Is Parallel",
             sortField :"is_parallel",
             value:  #"SYSTEM_SYSRULES_imageField_v1"(
               images: {
                 #"SYSTEM_SYSRULES_documentImage"(
                   document: #"SYSTEM_SYSRULES_iconIndicator"(
                     icon: if(
                       contains(
                         toboolean(
                           index(fv!row, "is_parallel", {})
                         ),
                         true()
                       ),
                       "STATUS_OK",
                       "STATUS_NOTDONE"
                     )
                   ),
                   caption: if(
                     contains(
                       toboolean(
                         index(fv!row, "is_parallel", {})
                       ),
                       true()
                     ),
                     "Active",
                     "In-Active"
                   )
                 )
               }
             ),
             align: "CENTER",
             width:"NARROW"
           ),
           #"SYSTEM_SYSRULES_gridColumn"(
             label: "Is Active",
             sortField :"is_active",
             value:  #"SYSTEM_SYSRULES_imageField_v1"(
               images: {
                 #"SYSTEM_SYSRULES_documentImage"(
                   document: #"SYSTEM_SYSRULES_iconIndicator"(
                     icon: if(
                       contains(
                         toboolean(
                           index(fv!row, "is_active", {})
                         ),
                         true()
                       ),
                       "STATUS_OK",
                       "STATUS_NOTDONE"
                     )
                   ),
                   caption: if(
                     contains(
                       toboolean(
                         index(fv!row, "is_active", {})
                       ),
                       true()
                     ),
                     "Active",
                     "In-Active"
                   )
                 )
               }
             ),
             align: "CENTER",
             width:"NARROW"
           ),
           #"SYSTEM_SYSRULES_gridColumn"(
             label: "Edit",
             value: #"SYSTEM_SYSRULES_richTextDisplayField"(
               showWhen: if(
                 or(fv!row.name="End",
                 fv!row.name="Run Config",
               #"urn:appian:function:v1:fn:isusermemberofgroup?okey=isusermemberofgroup"(
                 loggedInUser() ,#"_a-0000e5c3-a65f-8000-5268-1bef901bef90_766304"
               )=false()
               ),
               false(),
               true()
               ),
               
               value: {
                 #"SYSTEM_SYSRULES_richTextIcon"(
                   icon: "edit",
                   caption: "Edit",
                   link:if(tointeger(local!activeStep)=0,
                   #"SYSTEM_SYSRULES_dynamicLink"(
                     value: 1,
                     saveInto: 
                     {
                       local!activeStep,
                       a!save(
                         local!milestoneId,
                         fv!row.milestone_id

                       ),
                       a!save(
                         ri!milestone,
                         #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_350906"(
                           milestoneId:local!milestoneId
                         )

                       ),
                       a!save(local!edit,"edit")
                     }
                   ),{}),
                   linkStyle: "STANDALONE",
                   color:  if(tointeger(local!activeStep)=0,"ACCENT","SECONDARY"),
                   size: "MEDIUM_PLUS"
                 )
               },
               align: "CENTER"
             ),
             align: "CENTER"
           )
         },
         showWhen: or(local!activeStep)=0
       ),
       #"SYSTEM_SYSRULES_richTextDisplayField"(
         value: #"SYSTEM_SYSRULES_richTextItem_v1"(
           text: "+ Add Milestone",
           link: if(tointeger(local!activeStep)=0,
           #"SYSTEM_SYSRULES_dynamicLink"(
             value: 1,
             saveInto: {local!activeStep,
             a!save(ri!milestone,#"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_351328"(
               isParallel: 0,
               isActive: 1,
               sortId:count(local!getMilestoneData)+1,
               isEnableCustomProcessUuid:0,
               isConditionApplicable:0,
               isButtonEnabled:0,
               createdBy: loggedInUser(),
               createdOn: now()
             ))
             }
           ),
           {}),
           color: if(tointeger(local!activeStep)=0,"ACCENT","SECONDARY"),
           style: "STRONG"
         ),
         showWhen: or(tointeger(local!activeStep)=0)
       ),
       if(
         tointeger(local!activeStep)=1,
         #"SYSTEM_SYSRULES_gridLayout"(
           label: " ",
           labelPosition: "ABOVE",
           headerCells: {
             #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
               label: "Name",
               align: "LEFT"
             ),
             #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
               label: "Use Custom Process UUID ?",
               helpTooltip: "Disable to use generic process model uuid for the milestone ",
               align: "CENTER"
             ),
             #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
               label: "Process Model UUID",

               align: "LEFT"
             ),

            
             #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
               label: "Is Parallel",
               align: "CENTER"

             ),
             #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
               label: "Is Active",
               align: "CENTER"

             ),

           },
           columnConfigs: {
             #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
               width: "DISTRIBUTE",
               weight:2
             ),
             #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
               width: "DISTRIBUTE",
               weight: 1
             ),
             #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
               width: "DISTRIBUTE",
               weight:2
             ),


           
             #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
               width: "ICON"
             ),
             #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
               width: "ICON"
             )




           },
           rows: {
             #"SYSTEM_SYSRULES_forEach"(
               items: ri!milestone,
               expression: #"SYSTEM_SYSRULES_gridRowLayout"(
                 contents: {
                   #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_285963"(
                     label: "Name",
                     placeholder: "--Enter Name--",
                     validations: {
                       if(
                         ri!isReadOnly,
                         {},
                         #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3251505"(
                           Value: index(
                             fv!item,
                             "name",
                             {}
                           ),
                           ValidationLength: #"_a-0000e4c6-e892-8000-5254-1bef901bef90_42536"[5]
                         )
                       ),
                       if(
                         local!edit="edit",
                         {},
                         if(
                           contains(proper(local!getMilestoneData.name),proper(ri!milestone.name)),
                           "Duplicate Name Found",
                           {}
                         )
                       )

                     },
                     value: index(
                       fv!item,
                       "name",
                       {}
                     ),
                     saveInto: {
                       a!save(fv!item.name,trim(save!value)),
                       a!save(
                         fv!item.modified_by,
                         loggedInUser()
                       ),
                       a!save(
                         fv!item.modified_on,
                         now()
                       )
                     },
                     readOnly: ri!isReadOnly,
                     required: if(
                       or(
                         ri!isReadOnly
                       ),
                       false(),
                       true()
                     ),

                   ),
                   #"SYSTEM_SYSRULES_richTextDisplayField"(
                     value: {
                       if(
                         or(
                           tointeger(
                             index(
                               fv!item,
                               "is_enable_custom_process_uuid",
                               {}
                             )
                           ) = 1
                         ),
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           linkStyle: "STANDALONE",
                           icon: "toggle-on",
                           caption: "Yes",
                           link: #"SYSTEM_SYSRULES_dynamicLink"(
                             showWhen: not(
                               or(
                                 ri!isReadOnly
                               )
                             ),
                             value: 1,
                             saveInto: {a!save(
                               fv!item.is_enable_custom_process_uuid,
                               0
                             ),
                             a!save(
                               fv!item.modified_by,
                               loggedInUser()
                             ),
                             a!save(
                               fv!item.modified_on,
                               now()
                             )
                             }
                           ),
                           size: "MEDIUM_PLUS",
                           color: "ACCENT"
                         ),
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           linkStyle: "STANDALONE",
                           icon: "toggle-off",
                           caption: "No",
                           link: #"SYSTEM_SYSRULES_dynamicLink"(
                             showWhen: not(
                               or(
                                 ri!isReadOnly
                               )
                             ),
                             value: 0,
                             saveInto: {a!save(
                               fv!item.is_enable_custom_process_uuid,
                               1
                             ),
                             a!save(
                               fv!item.modified_by,
                               loggedInUser()
                             ),
                             a!save(
                               fv!item.modified_on,
                               now()
                             )
                             }
                           ),
                           size: "MEDIUM_PLUS",
                           color: "ACCENT"
                         )
                       )
                     },
                     align: "CENTER"
                   ),
                   #"_a-0000e4e9-ef8d-8000-5259-1bef901bef90_285963"(
                     label: " ",
                     placeholder: "--Enter Process Model UUID--",
                     value: index(
                       fv!item,
                       "process_model_uuid",
                       {}
                     ),
                     disabled:if(
                       tointeger(
                         index(
                           fv!item,
                           "is_enable_custom_process_uuid",
                           {}
                         )
                       ) = 1,
                       true(),
                       false()
                     ),
                     


                     saveInto: {
                       a!save(fv!item.process_model_uuid,trim(save!value)),
                       a!save(
                         fv!item.modified_by,
                         loggedInUser()
                       ),
                       a!save(
                         fv!item.modified_on,
                         now()
                       )},
                       readOnly: ri!isReadOnly,
                       align: "LEFT"
                   ),

                  
                   #"SYSTEM_SYSRULES_richTextDisplayField"(
                     value: {
                       if(
                         or(
                           tointeger(
                             index(
                               fv!item,
                               "is_parallel",
                               {}
                             )
                           ) = 1
                         ),
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           linkStyle: "STANDALONE",
                           icon: "toggle-on",
                           caption: "Yes",
                           link: #"SYSTEM_SYSRULES_dynamicLink"(
                             showWhen: not(
                               or(
                                 ri!isReadOnly
                               )
                             ),
                             value: 1,
                             saveInto: {a!save(
                               fv!item.is_parallel,
                               0
                             ),
                             a!save(
                               fv!item.modified_by,
                               loggedInUser()
                             ),
                             a!save(
                               fv!item.modified_on,
                               now()
                             )
                             }
                           ),
                           size: "MEDIUM_PLUS",
                           color: "ACCENT"
                         ),
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           linkStyle: "STANDALONE",
                           icon: "toggle-off",
                           caption: "No",
                           link: #"SYSTEM_SYSRULES_dynamicLink"(
                             showWhen: not(
                               or(
                                 ri!isReadOnly
                               )
                             ),
                             value: 0,
                             saveInto: {a!save(
                               fv!item.is_parallel,
                               1
                             ),
                             a!save(
                               fv!item.modified_by,
                               loggedInUser()
                             ),
                             a!save(
                               fv!item.modified_on,
                               now()
                             )
                             }
                           ),
                           size: "MEDIUM_PLUS",
                           color: "ACCENT"
                         )
                       )
                     },
                     align: "CENTER"
                   ),
                   /* Is Active */
                   #"SYSTEM_SYSRULES_richTextDisplayField"(
                     value: {
                       if(
                         or(
                           tointeger(
                             index(
                               fv!item,
                               "is_active",
                               {}
                             )
                           ) = 1
                         ),
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           linkStyle: "STANDALONE",
                           icon: "toggle-on",
                           caption: "Yes",
                           link: #"SYSTEM_SYSRULES_dynamicLink"(
                             showWhen: not(
                               or(
                                 ri!isReadOnly
                               )
                             ),
                             value: 1,
                             saveInto: {a!save(
                               fv!item.is_active,
                               0
                             ),
                             a!save(
                               fv!item.modified_by,
                               loggedInUser()
                             ),
                             a!save(
                               fv!item.modified_on,
                               now()
                             )
                             }
                           ),
                           size: "MEDIUM_PLUS",
                           color: "ACCENT"
                         ),
                         #"SYSTEM_SYSRULES_richTextIcon"(
                           linkStyle: "STANDALONE",
                           icon: "toggle-off",
                           caption: "No",
                           link: #"SYSTEM_SYSRULES_dynamicLink"(
                             showWhen: not(
                               or(
                                 ri!isReadOnly
                               )
                             ),
                             value: 0,
                             saveInto: {a!save(
                               fv!item.is_active,
                               1
                             ),
                             a!save(
                               fv!item.modified_by,
                               loggedInUser()
                             ),
                             a!save(
                               fv!item.modified_on,
                               now()
                             )
                             }
                           ),
                           size: "MEDIUM_PLUS",
                           color: "ACCENT"
                         )
                       )
                     },
                     align: "CENTER"
                   )
                 }
               )
             )
           },
           selectionSaveInto: {},
           addRowLink:{}
         ),
         {}
       ),

       #"SYSTEM_SYSRULES_ButtonLayout"(
         primaryButtons:{
           if(
             local!activeStep=1,
             #"SYSTEM_SYSRULES_ButtonWidget"(
               label:"Save",
               style:"PRIMARY",
               submit:true(),
               validate:true(),
               saveInto: a!save(ri!buttonAction,#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[4])
             ),
             {}
             /*
             a!buttonWidget(
               label:"Submit",
               style:"PRIMARY",
               submit:true(),
               validate:true(),
               saveInto: a!save(ri!buttonAction,cons!EAP_BUTTON_ACTION[1])
             )
             */
           )},
           secondaryButtons:{
             if(
               local!activeStep=1,
               #"SYSTEM_SYSRULES_ButtonWidget"(
                 label:"Back",
                 style:"NORMAL",

                 validate:false(),
                 saveInto: {a!save(local!activeStep,0),
                 a!save(ri!milestone,null),
                 a!save(local!edit,null)
                 }

               ),
               #"SYSTEM_SYSRULES_ButtonWidget"(
                 label:"Cancel",
                 style:"DESTRUCTIVE",
                 submit:true(),
                 validate:false(),
                 saveInto: a!save(ri!buttonAction,#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[2])
               )
             )
           }
       )
     }))</definition>
        <namedTypedValue>
            <name>milestone</name>
            <type>
                <name>EAP_T_DwfMilestone?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isReadOnly</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>buttonAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <history>
        <historyInfo versionUuid="_a-0000e518-940a-8000-525e-1bef901bef90_472384"/>
        <historyInfo versionUuid="_a-0000e518-940a-8000-525e-1bef901bef90_488852"/>
        <historyInfo versionUuid="_a-0000e518-940a-8000-525e-1bef901bef90_519656"/>
        <historyInfo versionUuid="_a-0000e595-3324-8000-5263-1bef901bef90_738317"/>
        <historyInfo versionUuid="_a-0000e5c3-a65f-8000-5268-1bef901bef90_766483"/>
    </history>
</contentHaul>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e5c3-a65f-8000-5268-1bef901bef90_761163</versionUuid>
    <interface>
        <name>EAP_emailTemplateConfigurationMasterForm</name>
        <uuid>_a-0000e595-3324-8000-5263-1bef901bef90_737061</uuid>
        <description>Holds the interface for creating and managing the email template</description>
        <parentUuid>_a-0000e4c3-7a1b-8000-524f-1bef901bef90_6580</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  
  local!concatSubjectAndBody:concat(ri!outEmailTemplateConfig.subject," ",ri!outEmailTemplateConfig.body),
  local!Body:extract(local!concatSubjectAndBody,"$$","$$"),
  {
  #"SYSTEM_SYSRULES_richTextDisplayField"(
    value: #"SYSTEM_SYSRULES_richTextItem_v1"(
      text: "Template Configuration",
      style: "STRONG",
      size: "MEDIUM",
      color: "SECONDARY"
    )
  ),
  #"SYSTEM_SYSRULES_cardLayout"(
    showBorder: false(),
    style: "INFO",
    contents: {
      #"SYSTEM_SYSRULES_columnsLayout"(
        columns: {
          #"SYSTEM_SYSRULES_columnLayout"(
            contents: {
              if(
                ri!isReadOnly,
                {
                  /*Template name readonly*/
                  #"SYSTEM_SYSRULES_sideBySideLayout"(
                      items:{
                        #"SYSTEM_SYSRULES_sideBySideItem"(
                          item:#"SYSTEM_SYSRULES_richTextDisplayField"(
                            value:#"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: "Template Name",
                              style: "STRONG",
                              size: "STANDARD"
                            )
                          ),
                          width: "MINIMIZE"
                        ),
                        #"SYSTEM_SYSRULES_sideBySideItem"(
                          item:#"SYSTEM_SYSRULES_richTextDisplayField"(
                            value:#"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: index(
                                ri!outEmailTemplateConfig,
                                "template_name",
                                {}
                              ),
                              style: "",
                              size: "STANDARD"
                            )
                          ),
                          width: "MINIMIZE"
                        )
                      }
                    )
                },
                /*Template Name*/
                #"SYSTEM_SYSRULES_textField"(
                  label: "Template Name",
                  labelPosition: "ABOVE",
                  required: true,
                  readOnly: ri!isReadOnly,
                  value: index(
                    ri!outEmailTemplateConfig,
                    "template_name",
                    {}
                  ),
                  saveInto: {
                    a!save(
                      ri!outEmailTemplateConfig.template_name,
                      save!value
                    )
                  }
                )
              )
              
            }
          ),
          #"SYSTEM_SYSRULES_columnLayout"(
            contents: {
              if(
                ri!isReadOnly,
                {
                  /*Template description readonly*/
                  #"SYSTEM_SYSRULES_sideBySideLayout"(
                    items:{
                      #"SYSTEM_SYSRULES_sideBySideItem"(
                        item:#"SYSTEM_SYSRULES_richTextDisplayField"(
                          value:#"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: "Description",
                            style: "STRONG",
                            size: "STANDARD"
                          )
                        ),
                        width: "MINIMIZE"
                      ),
                      #"SYSTEM_SYSRULES_sideBySideItem"(
                        item:#"SYSTEM_SYSRULES_richTextDisplayField"(
                          value:#"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: index(
                              ri!outEmailTemplateConfig,
                              "description",
                              {}
                            ),
                            style: "",
                            size: "STANDARD"
                          )
                        ),
                        width: "MINIMIZE"
                      )
                    }
                  )
                },
                /*Template Description*/
                #"SYSTEM_SYSRULES_textField"(
                  label: "Description",
                  labelPosition: "ABOVE",
                  required: true,
                  readOnly: ri!isReadOnly,
                  value: index(
                    ri!outEmailTemplateConfig,
                    "description",
                    {}
                  ),
                  saveInto: {
                    a!save(
                      ri!outEmailTemplateConfig.description,
                      save!value
                    )
                  }
                )
              )
            }
          ),
          #"SYSTEM_SYSRULES_columnLayout"(
            contents: {
              if(
                ri!isReadOnly,
                {
                  #"SYSTEM_SYSRULES_sideBySideLayout"(
                    items:{
                      #"SYSTEM_SYSRULES_sideBySideItem"(
                        item:#"SYSTEM_SYSRULES_richTextDisplayField"(
                          value:#"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: "Is Template Active",
                            style: "STRONG",
                            size: "STANDARD"
                          )
                        ),
                        width: "MINIMIZE"
                      ),
                      #"SYSTEM_SYSRULES_sideBySideItem"(
                        item:#"SYSTEM_SYSRULES_imageField_v1"(
                          images: {
                            #"SYSTEM_SYSRULES_documentImage"(
                              document: #"SYSTEM_SYSRULES_iconIndicator"(
                                icon: if(
                                  index(
                                    ri!outEmailTemplateConfig,
                                    "is_active",
                                    {}
                                  ) = 1,
                                  "STATUS_OK",
                                  "STATUS_NOTDONE"
                                )
                              )
                            )
                          },
                          align: "CENTER",
                          size: "ICON"
                        ),
                        width: "MINIMIZE"
                      )
                    }
                  ),
                },
                /*Is active*/
                #"SYSTEM_SYSRULES_radioButtonField"(
                  label: "Is Template Active",
                  required: true,
                  choiceLayout: "COMPACT",
                  choiceLabels: {
                    "Yes",
                    "No"
                  },
                  choiceValues: {
                    1,
                    0
                  },
                  value: index(
                    ri!outEmailTemplateConfig,
                    "is_active",
                    {}
                  ),
                  saveInto: {
                    a!save(
                      ri!outEmailTemplateConfig.is_active,
                      save!value
                    )
                  },
                  disabled: ri!isReadOnly
                ),
                
              )
            }
          )
        }
      )
    }
  ),
  #"SYSTEM_SYSRULES_columnsLayout"(
    columns: {
      #"SYSTEM_SYSRULES_columnLayout"(
        contents: {
        
          #"SYSTEM_SYSRULES_richTextDisplayField"(),
          #"SYSTEM_SYSRULES_cardLayout"(
            showBorder: false(),
            style: "#F4F6F6",
            contents: {
              /*Attribute Grid*/
              #"SYSTEM_SYSRULES_gridLayout"(
                
               validations:if(
                 or(
                   #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(local!Body),
                   toboolean(ri!isReadOnly)
                   ),
                  {},
                  if(
                    contains(
                      toboolean(#"SYSTEM_SYSRULES_forEach"(
                        items: union(
                          local!Body,
                          local!Body
                        ),
                        expression: contains(
                          touniformstring(index(index(ri!outEmailAttributeConfig,
                          wherecontains(0,tointeger(index(ri!outEmailAttributeConfig,"is_active",{}))),{}),"attribute_name",{})),
                          touniformstring(fv!item)
                        )
                      )),true()),
                      "To mark this attribute inactive, please remove it from subject/body",
                      {}
                  )
                 ),
                
                label: "Template Attributes",
                headerCells: {
                  #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                    label: "Attribute Name",
                    align: "LEFT"
                  ),
                  #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                    label: "Is Active",
                    align: "CENTER"
                  ),
                  #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(
                    label: "",
                    showWhen: not(
                      ri!isReadOnly
                    )
                  )
                },
                columnConfigs: {
                  #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                    width: "DISTRIBUTE"
                  ),
                  #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                    width: "ICON"
                  ),
                  #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(
                    width: "ICON",
                    showWhen: not(
                      ri!isReadOnly
                    )
                  )
                },
                rows: {
                  #"SYSTEM_SYSRULES_applyComponents"(
                    function: #"_a-0000e5ac-f704-8000-5264-1bef901bef90_745613"(
                      outEmailAttributeConfig: ri!outEmailAttributeConfig,
                      index: _,
                      isReadOnly: ri!isReadOnly
                    ),
                    array: if(
                      or(
                        #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                          ri!outEmailAttributeConfig
                        ),
                        count(
                          ri!outEmailAttributeConfig
                        ) = 0
                      ),
                      null,
                      tointeger(
                        enumerate(
                          count(
                            ri!outEmailAttributeConfig
                          )
                        ) + 1
                      )
                    )
                  )
                },
                addRowLink: if(
                  ri!isReadOnly,
                  {},
                  #"SYSTEM_SYSRULES_dynamicLink"(
                    label: "Add Attribute",
                    value: #"_a-0000e5ac-f704-8000-5264-1bef901bef90_742544"(
                      createdBy: loggedInUser(),
                      createdOn: now(),
                      modifiedBy: loggedInUser(),
                      modifiedOn: now(),
                      isActive: 1
                    ),
                    saveInto: a!save(
                      ri!outEmailAttributeConfig,
                      append(
                        ri!outEmailAttributeConfig,
                        save!value
                      )
                    )
                  )
                ),
                
              ),
              #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                buttons: {
                  #"SYSTEM_SYSRULES_ButtonWidget"(
                    label: "Save Attributes",
                    submit: true(),
                    size: "SMALL",
                    style: "LINK",
                    value: #"_a-0000e4c3-ab68-8000-5250-1bef901bef90_13888"[4],
                    saveInto: {
                      ri!buttonAction
                    },
                    showWhen: if(
                      or(
                        ri!isReadOnly,
                        #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                          ri!outEmailAttributeConfig
                        )
                        ),
                      false,
                      true
                    ),
                    confirmButtonLabel:"Proceed",
                    cancelButtonLabel: "Cancel",
                    confirmHeader: if(
                      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                        index(ri!outEmailTemplateConfig,"out_email_template_config_id",{})
                      ),
                      "Heads-up",
                      {}
                    ),
                    confirmMessage: if(
                      #"_a-0000e4b2-6487-8000-2b63-01ef9001ef90_3233095"(
                        index(ri!outEmailTemplateConfig,"out_email_template_config_id",{})
                      ),
                      "Template will be created if attributes are saved!",
                      {}
                    ),
                    /*disabled: if(*/
                      /*rule!EAP_Utils_CheckIsNull(*/
                        /*ri!outEmailAttributeConfig*/
                      /*),*/
                      /*true,*/
                      /*false*/
                    /*)*/
                  )
                }
              )
            },
            marginBelow: "STANDARD"
          ),
          #"SYSTEM_SYSRULES_cardLayout"(
            style: "WARN",
            showBorder: false,
            contents: {
              #"SYSTEM_SYSRULES_columnsLayout"(
                columns: {
                  #"SYSTEM_SYSRULES_columnLayout"(
                    contents: {
                      /*Note*/
                      #"SYSTEM_SYSRULES_richTextDisplayField"(
                        value: {
                          #"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: "NOTE: Please save the attribute in order to use it in the Subject &amp; Body",
                            size: "SMALL",
                            style: {"EMPHASIS","STRONG"},
                            color: "ACCENT"
                          )
                        }
                      )
                    },
                    width: "WIDE"
                  )
                }
              ),
              
            },
            showWhen: not(
              ri!isReadOnly
            )
          )
        },
        width: "MEDIUM"
      ),
      #"SYSTEM_SYSRULES_columnLayout"(
        contents: {
          #"SYSTEM_SYSRULES_richTextDisplayField"(),
          #"SYSTEM_SYSRULES_cardLayout"(
            showBorder: false(),
            style: "#F4F6F6",
            contents: {
              /*Subject and Body*/
              #"_a-0000e595-3324-8000-5263-1bef901bef90_739450"(
                isReadOnly: ri!isReadOnly,
                outEmailTemplateConfig: ri!outEmailTemplateConfig,
                outEmailAttributeConfig: ri!outEmailAttributeConfig
              )
            }
          )
        }
      )
    }
  )
})</definition>
        <namedTypedValue>
            <name>outEmailTemplateConfig</name>
            <type>
                <name>EAP_T_OutEmailTemplateConfig</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>isReadOnly</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>masterLookupData</name>
            <type>
                <name>EAP_T_RefMaster?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>emailTempUniqueIdentifiers</name>
            <type>
                <name>EAP_Temp_EmailTemplateUniqueIdentifiers</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>processdetails</name>
            <type>
                <name>EAP_T_RefProcess?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>showtemplateConfigScreen</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>outEmailAttributeConfig</name>
            <type>
                <name>EAP_T_OutEmailAttributeConfig?list</name>
                <namespace>urn:com:appian:types:eap</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>buttonAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:n1="urn:com:appian:types:eap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="n1:EAP_T_OutEmailTemplateConfig"/>
                    <a:nameRef>outEmailTemplateConfig</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>isReadOnly</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>masterLookupData</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:n2="urn:com:appian:types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="n2:EAP_Temp_EmailTemplateUniqueIdentifiers"/>
                    <a:nameRef>emailTempUniqueIdentifiers</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e4c3-ab68-8000-5250-1bef901bef90_12194"(
  is_active:1
)</a:value>
                    <a:nameRef>processdetails</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>showtemplateConfigScreen</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>outEmailAttributeConfig</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>buttonAction</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e5c3-a65f-8000-5268-1bef901bef90_756343"/>
        <historyInfo versionUuid="_a-0000e5c3-a65f-8000-5268-1bef901bef90_761163"/>
    </history>
</contentHaul>
